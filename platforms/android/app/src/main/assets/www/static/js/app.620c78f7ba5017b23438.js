webpackJsonp([1],{"+g8z":function(e,t){},"0D0M":function(e,t){},"1pXV":function(e,t){},"4FET":function(e,t){},"4ds/":function(e,t){},"5+69":function(e,t){},"6Ak+":function(e,t){},"7yem":function(e,t){},BoZV:function(e,t){},D8wq:function(e,t){},DNSH:function(e,t){},JGmR:function(e,t){},Me1Z:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};s.d(n,"debounce",function(){return G}),s.d(n,"checkEmail",function(){return E}),s.d(n,"toNomalTime",function(){return S}),s.d(n,"dotdot",function(){return N}),s.d(n,"getUrlKey",function(){return T});var a={};s.d(a,"chatRobot",function(){return Lt}),s.d(a,"register",function(){return Ht}),s.d(a,"activateEmail",function(){return Dt}),s.d(a,"login",function(){return Pt}),s.d(a,"findPerson",function(){return Rt}),s.d(a,"queryUserInfo",function(){return jt}),s.d(a,"queryUserInfoSpecial",function(){return Ot}),s.d(a,"getNewFriends",function(){return At}),s.d(a,"getAlreadyFriends",function(){return qt}),s.d(a,"getAlreadyGroups",function(){return Wt}),s.d(a,"isFriendJudge",function(){return Vt}),s.d(a,"messageList",function(){return Jt}),s.d(a,"insertNewFriends",function(){return zt}),s.d(a,"beFriends",function(){return Zt}),s.d(a,"updateNewFriendsState",function(){return Kt}),s.d(a,"getPrivateDetail",function(){return Xt}),s.d(a,"savePrivateMsg",function(){return Qt}),s.d(a,"confirmEditorRemark",function(){return Yt}),s.d(a,"confirmEditorInfo",function(){return es}),s.d(a,"confirmDeleteFriend",function(){return ts}),s.d(a,"confirmCreateGroup",function(){return ss}),s.d(a,"confirmEditGroup",function(){return ns}),s.d(a,"confirmJoinGroup",function(){return as}),s.d(a,"getGroupChat",function(){return rs}),s.d(a,"saveGroupChatMsg",function(){return is}),s.d(a,"addGroupChatRelation",function(){return os}),s.d(a,"getGroupInformation",function(){return cs}),s.d(a,"judgeIsInGroup",function(){return us}),s.d(a,"exitChatGroup",function(){return ps}),s.d(a,"pvLog",function(){return ms}),s.d(a,"github",function(){return ls}),s.d(a,"getFeedback",function(){return ds}),s.d(a,"submitFeedback",function(){return fs}),s.d(a,"confirmUpdatePassword",function(){return gs});var r={};s.d(r,"systemName",function(){return hs}),s.d(r,"isMobile",function(){return vs}),s.d(r,"feedbackListData",function(){return _s}),s.d(r,"userInfoDataGetter",function(){return bs}),s.d(r,"robotMsgGetter",function(){return ws}),s.d(r,"newFriendGetter",function(){return xs}),s.d(r,"msgListGetter",function(){return Cs}),s.d(r,"firstLoad",function(){return Is}),s.d(r,"someOneInfoGetter",function(){return ys}),s.d(r,"tabTipsGetter",function(){return ks}),s.d(r,"groupMemberGetter",function(){return Ms}),s.d(r,"groupInfoGetter",function(){return $s});var o=s("fZjL"),c=s.n(o),u=s("7+uW"),p=s("//Fk"),m=s.n(p),l=s("mtWM"),d=s.n(l),f=s("/ocq"),g=s("Xxa5"),h=s.n(g),v=s("exGp"),_=s.n(v),b=s("Dd8w"),w=s.n(b),x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header"},[e.goback?s("svg",{staticClass:"icon goback",attrs:{"aria-hidden":"true"},on:{click:e.goBack}},[s("use",{attrs:{"xlink:href":"#iconback"}})]):e._e(),e._v(" "),s("span",[e._v(e._s(e.title))]),e._v(" "),s("svg",{directives:[{name:"show",rawName:"v-show",value:1===e.currentTab||3===e.currentTab,expression:"currentTab === 1 || currentTab === 3"}],staticClass:"icon add",attrs:{"aria-hidden":"true"},on:{click:e.add}},[s("use",{attrs:{"xlink:href":"#iconadd-copy"}})]),e._v(" "),s("svg",{directives:[{name:"show",rawName:"v-show",value:e.groupInfo,expression:"groupInfo"}],staticClass:"icon add",attrs:{"aria-hidden":"true"},on:{click:e.lookGroupInfo}},[s("use",{attrs:{"xlink:href":"#icongroup-copy-white"}})]),e._v(" "),s("svg",{directives:[{name:"show",rawName:"v-show",value:e.userInfo,expression:"userInfo"}],staticClass:"icon add",attrs:{"aria-hidden":"true"},on:{click:e.lookUserInfo}},[s("use",{attrs:{"xlink:href":"#icongroup-copy-white"}})])])},staticRenderFns:[]};var C=s("VU/8")({name:"Header",props:["currentTab","chatTitle","goback","groupInfo","userInfo"],data:function(){return{}},computed:{title:function(){return 1===this.currentTab?"消息":2===this.currentTab?"机器人":3===this.currentTab?"通讯录":4===this.currentTab?"我":this.chatTitle}},methods:{add:function(){this.$router.push("/add")},lookGroupInfo:function(){this.$emit("showGroupInfo",!0)},lookUserInfo:function(){var e="/user_info/"+this.$route.params.user_id;this.$router.push(e)},goBack:function(){this.$router.back()}}},x,!1,function(e){s("D8wq")},"data-v-f06d4762",null).exports,I=s("NYxO"),y={name:"Footer",props:["currentTab"],data:function(){return{}},computed:w()({},Object(I.c)(["tabTipsGetter"]))},k={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"footer"},[s("router-link",{staticClass:"item",attrs:{to:"message"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:1===e.currentTab,expression:"currentTab === 1"}],staticClass:"active",attrs:{"xlink:href":"#iconmessage-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:1!==e.currentTab,expression:"currentTab !== 1"}],attrs:{"xlink:href":"#iconmessage"}})]),e._v(" "),s("p",[e._v("消息")])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"robot"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:2===e.currentTab,expression:"currentTab === 2"}],attrs:{"xlink:href":"#iconrobot-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:2!==e.currentTab,expression:"currentTab !== 2"}],attrs:{"xlink:href":"#iconrobot"}})]),e._v(" "),s("p",[e._v("机器人")])]),e._v(" "),s("router-link",{staticClass:"item",class:this.tabTipsGetter.addFriendReq,attrs:{to:"contact_list"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:3===e.currentTab,expression:"currentTab === 3"}],attrs:{"xlink:href":"#icongroup-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:3!==e.currentTab,expression:"currentTab !== 3"}],attrs:{"xlink:href":"#icongroup"}})]),e._v(" "),s("p",[e._v("通讯录")])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"me"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:4===e.currentTab,expression:"currentTab === 4"}],attrs:{"xlink:href":"#iconme-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:4!==e.currentTab,expression:"currentTab !== 4"}],attrs:{"xlink:href":"#iconme"}})]),e._v(" "),s("p",[e._v("我的乐聊")])]),e._v(" "),s("router-link",{staticClass:"item",attrs:{to:"feedback"}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{directives:[{name:"show",rawName:"v-show",value:5===e.currentTab,expression:"currentTab === 5"}],attrs:{"xlink:href":"#iconfeedback-copy"}}),e._v(" "),s("use",{directives:[{name:"show",rawName:"v-show",value:5!==e.currentTab,expression:"currentTab !== 5"}],attrs:{"xlink:href":"#iconfeedback"}})]),e._v(" "),s("p",[e._v("留言反馈")])])],1)},staticRenderFns:[]};var M=s("VU/8")(y,k,!1,function(e){s("g9ve")},"data-v-34a7bdba",null).exports,$={name:"chat-item",props:["me","name","img","msg","time","href"],components:{},data:function(){return{}},computed:{},watch:{},methods:{lookInfo:function(){this.href?this.$router.push("/user_info/"+this.href):window.location.href="https:// github.com/saucxs/happy-chat-web"}}},B={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"chat-item"},[e.me?e._e():s("div",{staticClass:"otherchat"},[s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"},on:{click:e.lookInfo}},[s("use",{attrs:{"xlink:href":"#iconrobot"}})]),e._v(" "),s("div",{staticClass:"nt"},[e.name?s("span",[e._v(e._s(e.name))]):e._e(),e.time?s("span",[e._v(e._s(e.time))]):e._e()]),e._v(" "),s("div",{staticClass:"msg"},[e._v(e._s(e.msg))])]),e._v(" "),e.me?s("div",{staticClass:"mychat"},[e.img?e._e():s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"},on:{click:e.lookInfo}},[s("use",{attrs:{"xlink:href":"#iconniu"}})]),e._v(" "),e.img?s("img",{staticClass:"icon img",attrs:{src:e.img}}):e._e(),e._v(" "),s("div",{staticClass:"nt"},[e.time?s("span",[e._v(e._s(e.time))]):e._e(),e.name?s("span",[e._v(e._s(e.name))]):e._e()]),e._v(" "),s("div",{staticClass:"msg"},[e._v(e._s(e.msg))])]):e._e()])},staticRenderFns:[]};var F=s("VU/8")($,B,!1,function(e){s("k7SN")},"data-v-1b7fbb06",null).exports;function G(e,t,s){var n=void 0;return function(){var a=this,r=arguments;if(n&&clearTimeout(n),s){var i=!n;n=setTimeout(function(){n=null},t),i&&e.apply(a,r)}else n=setTimeout(function(){e.apply(a,r)},t)}}function E(e){if(e){return/^\w+@\w+\.[a-z]{2,6}$/.test(e)}}function S(e){var t=new Date(parseInt(e));return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()<10?"0"+t.getDate()+" ":t.getDate()+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())}function N(e,t){return e?e.length>t?e.substring(0,t-1)+"...":e:""}function T(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null}var U={name:"Robot",data:function(){return{currentTab:2,inputMsg:"",time:S((new Date).getTime()),isScrollToBottom:!0,viewBox:"",userInfo:JSON.parse(localStorage.getItem("HappyChatUserInfo"))}},components:{Header:C,Footer:M,ChatItem:F},methods:w()({},Object(I.b)(["chatRobot"]),{sendMessage:function(e){var t=this;return _()(h.a.mark(function s(){var n;return h.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.inputMsg="",""!=e.trim()){s.next=3;break}return s.abrupt("return");case 3:return t.$store.commit("robotMsgMutation",{message:e}),n={message:e,userId:t.userInfo.user_id},s.next=7,t.chatRobot(n);case 7:t.refresh();case 8:case"end":return s.stop()}},s,t)}))()},refresh:function(){var e=this;this.viewBox=this.$refs.viewBox,setTimeout(function(){e.viewBox.scrollTop=e.viewBox.scrollHeight},4)}}),watch:{robotMsgGetter:function(){this.refresh(),this.$refs.message.focus()}},computed:w()({},Object(I.c)(["robotMsgGetter","userInfoDataGetter"])),created:function(){}},L={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{currentTab:e.currentTab}}),e._v(" "),s("div",{staticClass:"chat-wrapper"},[s("div",{staticClass:"secret-box"},[s("ul",{ref:"viewBox"},e._l(e.robotMsgGetter,function(t){return s("li",[t.user?s("ChatItem",{attrs:{msg:t.message,name:t.user,time:e.time}}):e._e(),e._v(" "),t.user?e._e():s("ChatItem",{attrs:{me:"true",name:e.userInfo.name,href:e.userInfo.user_id,img:e.userInfo.avatar,msg:t.message,time:e.time}})],1)}),0)])]),e._v(" "),s("div",{staticClass:"input-msg"},[s("textarea",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.inputMsg,expression:"inputMsg"}],ref:"message",staticStyle:{"-webkit-user-select":"text !important"},domProps:{value:e.inputMsg},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(e.inputMsg))},input:function(t){t.target.composing||(e.inputMsg=t.target.value)}}}),e._v(" "),s("p",{staticClass:"btn",class:{enable:""!=e.inputMsg},on:{click:function(t){return e.sendMessage(e.inputMsg)}}},[e._v("发送")])]),e._v(" "),s("Footer",{attrs:{currentTab:e.currentTab}})],1)},staticRenderFns:[]};var H=s("VU/8")(U,L,!1,function(e){s("0D0M")},"data-v-7b7e0728",null).exports,D={data:function(){return{name:"",password:"",email:"",messageBox:{visible:!1,message:"",hasCancel:!0,messageBoxEvent:""},disabledFlag:!1}},computed:w()({},Object(I.c)(["systemName"])),methods:w()({},Object(I.b)(["register","activateEmail"]),{actualRegister:function(){var e=this,t={name:this.name,password:this.password,email:this.email};if(""!==this.name&&""!==this.password&&""!==this.email&&E(this.email))this.register(t).then(function(t){t&&(t.success?(e.messageBox.messageBoxEvent="register",e.messageBox.visible=!0,e.messageBox.message=t.message||"您已注册成功"):e.$message({message:t.message,type:"error"})),e.disabledFlag=!1}).catch(function(t){console.log(t),e.$message({message:"服务器出错啦",type:"error"}),e.disabledFlag=!1});else{var s=void 0;""===this.name&&(s="请输入用户名"),""===this.password&&(s="请输入密码"),""===this.email&&(s="请输入邮箱"),E(this.email)||(s="请输入正确的邮箱"),this.$message({message:s,type:"warn"})}},startRegister:function(){this.disabledFlag=!0,this.actualRegister()},confirm:function(e){"register"===e&&(this.messageBox.visible=!1,this.$router.push("/login"))},goLogin:function(){this.$router.push({path:"/login"})}})},P={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("Message-box",{attrs:{visible:this.messageBox.visible,messageBoxEvent:this.messageBox.messageBoxEvent,hasCancel:!1},on:{confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("div",{staticClass:"wrapper fadeInDown"},[s("div",{attrs:{id:"formContent"}},[s("div",{staticClass:"flex-style"},[s("h2",{staticClass:"inactive",on:{click:function(t){return e.goLogin()}}},[e._v(" 登  录 ")]),e._v(" "),s("h2",{staticClass:"active"},[e._v("注  册 ")])]),e._v(" "),s("div",{staticClass:"fadeIn first"},[s("svg",{staticClass:"icon-logo",attrs:{id:"icon",alt:"happyChat乐聊",title:"happyChat乐聊","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconliaotian-copy-copy-copy"}})]),e._v(" "),s("div",{staticClass:"system-name"},[e._v(e._s(e.systemName))])]),e._v(" "),s("form",{staticClass:"register-form"},[s("div",{staticClass:"login-form-flex"},[s("span",{staticClass:"normal-word"},[e._v("用户名：")]),s("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"input-class fadeIn second",staticStyle:{"-webkit-user-select":"text !important"},attrs:{maxlength:"16",type:"text",placeholder:"用户名"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"login-form-flex"},[s("span",{staticClass:"normal-word"},[e._v("密   码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-class fadeIn third",staticStyle:{"-webkit-user-select":"text !important"},attrs:{maxlength:"24",type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"login-form-flex"},[s("span",{staticClass:"normal-word"},[e._v("邮   箱：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input-class fadeIn third",staticStyle:{"-webkit-user-select":"text !important"},attrs:{maxlength:"36",type:"email",placeholder:"邮箱"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"action action-box-spe",class:{disabled:e.disabledFlag}},[s("span",{staticClass:"primary-span",on:{click:e.startRegister}},[e._v("注 册")])])])])])],1)},staticRenderFns:[]};var R=s("VU/8")(D,P,!1,function(e){s("V4Wu")},"data-v-2532a3c4",null).exports,j=s("mvHQ"),O=s.n(j),A={name:"login",props:{},components:{},watch:{},computed:w()({},Object(I.c)(["systemName"])),data:function(){return{name:"",password:"",messageBox:{visible:!1,message:"",hasCancel:!0,messageBoxEvent:""}}},beforeRouteEnter:function(e,t,s){s(function(e){e.queryData()})},methods:w()({},Object(I.b)(["login","github"]),{startLogin:function(){var e=this;if(""!==this.name&&""!==this.password){var t={name:this.name,password:this.password};this.$loading.show(),this.login(t).then(function(t){t&&(e.$loading.hide(),t.success?(socketWeb.emit("login",t.userInfo.user_id),localStorage.setItem("HappyChatUserToken",t.token),localStorage.setItem("HappyChatUserInfo",O()(t.userInfo)),e.$store.commit("firstLoadMutation",!0),e.messageBox.messageBoxEvent="login",e.messageBox.visible=!0,e.messageBox.message="您已登录成功"):e.$message({message:t.message,type:"warn"}))}).catch(function(t){console.log(t),e.$message({message:"服务器出错啦",type:"error"})})}else{var s=""===this.name?"请输入用户名":"请输入密码";this.$message({message:s,type:"warn"})}},confirm:function(e){if("login"===e){this.messageBox.visible=!1;var t=decodeURIComponent(this.$route.query.redirect||"/robot");this.$router.push({path:t})}},goGithubOAuth:function(){window.location.href="https://github.com/login/oauth/authorize?client_id=ceeee7092960dc0704b7&redirect_uri=https://chat.chengxinsong.cn/login"},goRegister:function(){this.$router.push({path:"/register"})},queryData:function(){var e=this,t=T("code");t&&(this.$loading.show(),this.github({code:t}).then(function(t){t.success&&(e.$message({message:t.message,type:"success"}),e.$loading.hide(),e.$store.commit("firstLoadMutation",!0),socketWeb.emit("login",t.userInfo.user_id),localStorage.setItem("HappyChatUserToken",t.token),localStorage.setItem("HappyChatUserInfo",O()(t.userInfo)),e.$router.push({path:"/robot"}))}))},goFeedback:function(){this.$router.push({path:"/feedback"})}})},q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("Message-box",{attrs:{visible:this.messageBox.visible,messageBoxEvent:this.messageBox.messageBoxEvent,hasCancel:!1},on:{confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("div",{staticClass:"wrapper fadeInDown"},[s("div",{attrs:{id:"formContent"}},[s("div",{staticClass:"flex-style"},[s("h2",{staticClass:"active"},[e._v(" 登  录 ")]),e._v(" "),s("h2",{staticClass:"inactive",on:{click:function(t){return e.goRegister()}}},[e._v(" 注  册 ")])]),e._v(" "),s("div",{staticClass:"fadeIn first"},[s("svg",{staticClass:"icon-logo",attrs:{id:"icon",alt:"happyChat乐聊",title:"happyChat乐聊","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconliaotian-copy-copy-copy"}})]),e._v(" "),s("div",{staticClass:"system-name"},[e._v(e._s(e.systemName))])]),e._v(" "),s("form",[s("div",{staticClass:"login-form-flex"},[s("span",{staticClass:"normal-word"},[e._v("用户名：")]),s("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"input-class fadeIn second",staticStyle:{"-webkit-user-select":"text !important"},attrs:{maxlength:"16",type:"text",placeholder:"用户名"},domProps:{value:e.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.startLogin(t)},input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"login-form-flex"},[s("span",{staticClass:"normal-word"},[e._v("密   码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-class fadeIn third",staticStyle:{"-webkit-user-select":"text !important"},attrs:{maxlength:"24",type:"password",placeholder:"密码"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.startLogin(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"action action-box-login"},[s("span",{staticClass:"primary-span",on:{click:e.startLogin}},[e._v("登   录")])])]),e._v(" "),s("div",{staticClass:"oauth-line-box"},[e._v("\n        第三方登陆\n      ")]),e._v(" "),s("div",{staticClass:"oauth-box"},[s("svg",{staticClass:"icon github-icon",attrs:{id:"icon",alt:"github登陆",title:"github登陆","aria-hidden":"true"},on:{click:e.goGithubOAuth}},[s("use",{attrs:{"xlink:href":"#iconGitHub"}})])]),e._v(" "),s("div",{staticClass:"feed-back flex-style"},[s("a",{attrs:{href:"https://github.com/saucxs/happy-chat-web",target:"_blank"}},[e._v("项目地址")]),e._v(" "),s("span",{staticClass:"feedback-link",on:{click:function(t){return e.goFeedback()}}},[e._v("留言反馈")])])])])],1)},staticRenderFns:[]};var W=s("VU/8")(A,q,!1,function(e){s("nDEl")},"data-v-b224aa16",null).exports,V={name:"activate",props:{},components:{},data:function(){return{code:this.$route.params.code,message:""}},created:function(){this.activateEmailFunction()},methods:w()({},Object(I.b)(["activateEmail"]),{goBackLogin:function(){this.$router.push("/login")},activateEmailFunction:function(){var e=this,t={code:this.code};this.activateEmail(t).then(function(t){t&&(e.message=t.message)}).catch(function(t){e.$message({message:t||"服务器出错啦",type:"error"})})}})},J={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"activate"},[s("div",{staticClass:"wrapper fadeInDown"},[s("div",{attrs:{id:"formContent"}},[s("h2",{staticClass:"active"},[e._v(" 激活邮箱 ")]),e._v(" "),s("div",{staticClass:"fadeIn first"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconliaotian"}})])]),e._v(" "),s("p",{staticClass:"message-tip"},[e._v(e._s(e.message))]),e._v(" "),s("div",{staticClass:"action"},[s("span",{staticClass:"primary-span",on:{click:e.goBackLogin}},[e._v("返回登录")])])])])])},staticRenderFns:[]};var z=s("VU/8")(V,J,!1,function(e){s("cfw9")},"data-v-3f3d22bf",null).exports,Z={props:{type:{type:String,default:"",required:!1},name:{type:String,default:"",required:!1}},methods:{goOther:function(){var e=void 0;"addAuthor"===this.type?(e="/user_info/16",this.$router.push(e)):"addGroup"===this.type?(e="/group_chat/64bd8fa0-a149-11e9-8893-6bfa70c9461a",this.$router.push(e)):"goSearch"===this.type&&(e="/add",this.$router.push(e))}}},K={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"no-content"},[s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconkong"}})]),e._v(" "),""!==e.type&&""!==e.name?s("div",{staticClass:"action",on:{click:e.goOther}},[s("span",{staticClass:"primary-span"},[e._v(e._s(e.name))])]):e._e()])},staticRenderFns:[]},X=s("VU/8")(Z,K,!1,null,null,null).exports,Q={name:"message",data:function(){return{currentTab:1,webSocket:"",userInfo:""}},components:{Header:C,Footer:M,Nothing:X},computed:w()({},Object(I.c)(["firstLoad","msgListGetter"])),methods:w()({},Object(I.b)(["messageList"]),{enterChat:function(e,t){var s="private"==e?"/private_chat/"+t:"/group_chat/"+t;this.$router.push(s)},getMsgBySocket:function(){var e=this;socketWeb.removeAllListeners("getPrivateMsg"),socketWeb.removeAllListeners("getGroupMsg"),socketWeb.on("getPrivateMsg",function(t){t.type="private",t.name=t.remark?t.remark:t.name,e.$store.commit("updateListMutation",t)}),socketWeb.on("getGroupMsg",function(t){t.type="group",e.$store.commit("updateListMutation",t)})},onScroll:function(){console.log("置底操作加载新数据的指令输出")}}),created:function(){var e=this;this.firstLoad&&(this.$loading.show(),this.messageList().then(function(t){e.$loading.hide()}),this.$store.commit("firstLoadMutation",!1)),this.getMsgBySocket()}},Y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{currentTab:e.currentTab}}),e._v(" "),s("div",{staticClass:"chat-wrapper-spe"},[e.msgListGetter.length>0?s("div",{staticClass:"secret-box-spe"},[s("ul",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onScroll,expression:"onScroll"}]},e._l(e.msgListGetter,function(t){return s("li",[s("div",{staticClass:"list-box",on:{click:function(s){return e.enterChat(t.type,t.id)}}},["group"===t.type?s("a",{attrs:{href:""}},[s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconniu"}})]),e._v(" "),t.unread?s("span",{staticClass:"group-unread"},[e._v(e._s(t.unread))]):e._e()]):e._e(),e._v(" "),"private"===t.type?s("a",{attrs:{href:""}},[s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconniu"}})]),e._v(" "),t.unread?s("span",{staticClass:"private-unread"},[e._v(e._s(t.unread))]):e._e()]):e._e(),e._v(" "),s("div",{staticClass:"content"},["group"===t.type?s("div",{staticClass:"title"},[e._v(e._s(t.group_name)),s("span",[e._v(e._s(t.time))])]):e._e(),e._v(" "),"private"===t.type?s("div",{staticClass:"title"},[e._v(e._s(t.remark?t.remark:t.name)),s("span",[e._v(e._s(t.time))])]):e._e(),e._v(" "),t.message?s("div",{staticClass:"message"},[e._v(e._s(e._f("dotdot")(t.message,32)))]):s("div",{staticClass:"message message-no"},[e._v("暂无消息~")])])])])}),0)]):s("Nothing",{attrs:{name:"加好友",type:"addAuthor"}})],1),e._v(" "),s("Footer",{attrs:{currentTab:e.currentTab}})],1)},staticRenderFns:[]};var ee=s("VU/8")(Q,Y,!1,function(e){s("Zo2f")},"data-v-752691e2",null).exports,te={components:{Header:C},data:function(){return{chatTitle:"加人,进群,建群",inputContent:""}},computed:{},watch:{},methods:{findPeople:function(){var e="/add_seach/user/"+this.inputContent;this.$router.push(e)},findGroup:function(){var e="/add_seach/group/"+this.inputContent;this.$router.push(e)},createGroup:function(){this.$router.push("/creat_group")}},mounted:function(){}},se={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:e.chatTitle}}),e._v(" "),s("div",{staticClass:"chat-wrapper-no-footer"},[s("div",{staticClass:"secret-box-spe"},[s("div",{staticClass:"creat-group",on:{click:e.createGroup}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icongroup-copy"}})]),e._v(" "),s("span",[e._v("建一个群")]),e._v(" "),s("svg",{staticClass:"icon icon-right",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconright"}})])]),e._v(" "),s("div",{staticClass:"search"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconsousuo"}})]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],staticStyle:{"-webkit-user-select":"text !important"},attrs:{type:"text",placeholder:"在这边输入用户名或者群名称哦"},domProps:{value:e.inputContent},on:{input:function(t){t.target.composing||(e.inputContent=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"choose"},[s("p",{directives:[{name:"show",rawName:"v-show",value:""!=this.inputContent,expression:"this.inputContent !='' "}],staticClass:"find-people",on:{click:e.findPeople}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-my-copy"}})]),s("span",[e._v("加人:  "+e._s(this.inputContent))])]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:""!=this.inputContent,expression:"this.inputContent !='' "}],staticClass:"find-group",on:{click:e.findGroup}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-group1"}})]),s("span",[e._v("进群:  "+e._s(this.inputContent))])])])])])],1)},staticRenderFns:[]};var ne=s("VU/8")(te,se,!1,function(e){s("BoZV")},"data-v-2e3df7f0",null).exports,ae={components:{Header:C,Nothing:X},data:function(){return{chatTitle:"查找中...",userDataList:[],groupDataList:[]}},computed:{},watch:{},methods:w()({},Object(I.b)(["findPerson","getGroupInformation"]),{getChatTitle:function(){var e=this.$route.params.username,t=this.$route.params.groupname;e?this.findPeople(e):t&&this.findGroup(t)},findPeople:function(e){var t=this;this.findPerson({name:e}).then(function(e){e.success?(t.userDataList=e.data.userInfo,t.chatTitle="查找结果（"+t.userDataList.length+"人）"):t.$message({message:"服务器出错啦",type:"error"})}).catch(function(e){console.log("err",e);var s=e.error;t.$message({message:s,type:"error"})})},findGroup:function(e){var t=this;this.getGroupInformation({groupName:e}).then(function(e){e.success?(t.groupDataList=e.data.groupInfo,t.chatTitle="查找结果（"+t.groupDataList.length+"群）"):t.$message({message:"服务器出错啦",type:"error"})}).catch(function(e){console.log("err",e);var s=e.error;t.$message({message:s,type:"error"})})},enterUserCard:function(e){this.$router.push("/user_info/"+e)},enterGroupCard:function(e){this.$router.push("/group_chat/"+e)}}),mounted:function(){this.getChatTitle()}},re={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:e.chatTitle}}),e._v(" "),s("div",{staticClass:"chat-wrapper-no-footer"},[e.userDataList.length>0||e.groupDataList.length>0?s("div",{staticClass:"secret-box-spe"},[s("ul",[e._l(e.userDataList,function(t){return e.userDataList!==[]?s("li",[s("div",{staticClass:"people-box",on:{click:function(s){return e.enterUserCard(t.id)}}},[s("img",{attrs:{src:t.avatar,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.name)+"\n                "),(t.sex=0)?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-icon1"}})]):s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-icon"}})])]),e._v(" "),s("p",[t.place?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-placeholder"}})]):e._e(),e._v(" "+e._s(t.place)+"\n                "),t.github?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-github"}})]):e._e(),e._v(" "+e._s(t.github)+"\n              ")])])])]):e._e()}),e._v(" "),e._l(e.groupDataList,function(t){return e.groupDataList!==[]?s("li",[s("div",{staticClass:"people-box",on:{click:function(s){return e.enterGroupCard(t.group_id)}}},[s("img",{attrs:{src:t.group_avatar,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",{staticClass:"group-creater"},[e._v(e._s(t.group_name)+" "),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-group_fill"}})]),e._v(" "),s("span",[e._v(" "+e._s(t.group_creater))])]),e._v(" "),s("p",[s("span",[e._v("群公告："+e._s(t.group_notice))])])])])]):e._e()})],2)]):s("Nothing",{attrs:{name:"返回",type:"goSearch"}})],1)],1)},staticRenderFns:[]};var ie=s("VU/8")(ae,re,!1,function(e){s("SRR9")},"data-v-5d62fe0e",null).exports,oe={components:{Header:C},data:function(){return{userInfo:{},myInfo:{},remark:"",isMyFriend:!1,isHisFriend:!1,isAddingMe:!1,isMe:!1,messageBox:{visible:!1,title:"提示",message:"",canInput:!1,hasCancel:!0,messageBoxEvent:"",canEditorInfo:!1},clear:!1}},computed:w()({},Object(I.c)(["newFriendGetter"])),methods:w()({},Object(I.b)(["queryUserInfo","isFriendJudge","confirmEditorRemark","confirmEditorInfo","confirmDeleteFriend","updateNewFriendsState","beFriends","confirmUpdatePassword"]),{getInfo:function(){var e=this;if(this.isMe)this.userInfo=this.myInfo;else{var t={user_id:this.$route.params.user_id};this.queryUserInfo(t).then(function(t){e.userInfo=t.data.userInfo[0]}).catch(function(e){console.log("err1",e)})}},isFriend:function(){var e=this,t={other_user_id:this.$route.params.user_id};this.isFriendJudge(t).then(function(t){0!=t.data.isMyFriend.length&&(e.isMyFriend=!0,e.remark=t.data.isMyFriend[0].remark),0!=t.data.isHisFriend.length&&(e.isHisFriend=!0)}).catch(function(e){console.log("err1",e)})},isAddingMeFun:function(){var e=this;this.newFriendGetter.forEach(function(t){t.from_user!=e.$route.params.user_id||1===t.status||(e.isAddingMe=!0)})},goGithub:function(){this.userInfo.github?window.location.href=this.userInfo.github:this.$message({message:"对方尚未放他的github链接哦",type:"error"})},goWebsite:function(){this.userInfo.website?window.location.href=this.userInfo.website:this.$message({message:"对方尚未放他的网站链接哦",type:"error"})},enterReqPage:function(){var e="/user_info/verify/"+this.$route.params.user_id;this.$router.push(e)},goChat:function(){var e="/private_chat/"+this.$route.params.user_id;this.$router.push(e)},stay:function(){var e="/user_info/"+this.$route.params.user_id;this.$router.push(e)},editorRemark:function(){this.messageBox.messageBoxEvent="editorRemark",this.messageBox.visible=!0,this.messageBox.canInput=!0,this.messageBox.title="修改备注"},editorInfo:function(e){"basic"===e?(this.messageBox.messageBoxEvent="editorInfo",this.messageBox.visible=!0,this.messageBox.canEditorInfo=!0,this.messageBox.title="修改我的信息"):"password"===e&&(this.clear=!1,this.messageBox.messageBoxEvent="editorPassword",this.messageBox.visible=!0,this.messageBox.canEditorInfo=!0,this.messageBox.title="修改密码")},shieldIt:function(){},deFriended:function(){this.messageBox.messageBoxEvent="delFriend",this.messageBox.visible=!0,this.messageBox.message="确定要删除此好友？"},agreeBeFriend:function(){var e=this;return _()(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.beFriends({other_user_id:e.$route.params.user_id}),t.next=3,e.updateNewFriends();case 3:e.messageBox.messageBoxEvent="agreeBeFriend",e.messageBox.visible=!0,e.messageBox.message="添加好友成功，进入聊天？";case 6:case"end":return t.stop()}},t,e)}))()},updateNewFriends:function(){var e=this;return _()(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.updateNewFriendsState({from_user:e.$route.params.user_id});case 1:case"end":return t.stop()}},t,e)}))()},cancel:function(e){this.messageBox.visible=!1,this.messageBox.canInput=!1,this.messageBox.message=null,"agreeBeFriend"===e&&location.reload()},confirm:function(e){var t=this;if("delFriend"===e){var s={user_id:this.myInfo.user_id,other_user_id:this.$route.params.user_id};this.confirmDeleteFriend(s).then(function(e){if(e){t.messageBox.visible=!1,t.messageBox.message=null;var s={action:"delete",id:t.$route.params.user_id};t.$store.commit("updateListMutation",s),t.$message({message:"删除此好友成功",type:"success"}),t.isMyFriend=!1}}).catch(function(e){console.log("err",e)})}if("agreeBeFriend"===e&&this.goChat(),"editorRemark"===e.messageBoxEvent){var n={remark:e.canInputText,other_user_id:this.$route.params.user_id};this.confirmEditorRemark(n).then(function(s){s&&(t.remark=e.canInputText,t.messageBox.canInput=!1,t.messageBox.visible=!1)})}if("editorInfo"===e.messageBoxEvent){var a=new RegExp(/^((https?|ftp|file):\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/);if(e.myInfo.website){if(!a.test(e.myInfo.website))return void this.$message({message:"请输入正确的网址",type:"error"});e.myInfo.website="http"!=e.myInfo.website.substr(0,4)?"http:// "+e.myInfo.website:e.myInfo.website}if(e.myInfo.github){if(!a.test(e.myInfo.github))return void this.$message({message:"请输入正确的网址",type:"error"});e.myInfo.github="http"!=e.myInfo.github.substr(0,4)?"http:// "+e.myInfo.github:e.myInfo.github}var r={github:e.myInfo.github,website:e.myInfo.website,sex:e.myInfo.sex,place:e.myInfo.place};this.confirmEditorInfo(r).then(function(s){s.success?(localStorage.setItem("HappyChatUserInfo",O()(e.myInfo)),t.userInfo=e.myInfo,t.messageBox.visible=!1):t.$message({message:s.message||"服务器异常",type:"warn"})})}if("editorPassword"===e.messageBoxEvent){if(!e.password.old&&!e.password.old.trim())return void this.$message({message:"请输入原密码",type:"warn"});if(!e.password.new&&!e.password.new.trim())return void this.$message({message:"请输入新密码",type:"warn"});if(e.password.new.trim()!==e.password.confirmNew.trim())return void this.$message({message:"新密码两次输入不一致",type:"warn"});this.confirmUpdatePassword(e.password).then(function(e){e.success?(t.clear=!0,t.$message({message:"修改密码成功",type:"success"}),t.messageBox.visible=!1):t.$message({message:e.message||"服务器异常",type:"warn"})})}}}),created:function(){var e=this;return _()(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.myInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),e.isMe=String(e.myInfo.user_id)===e.$route.params.user_id,t.next=4,e.isAddingMeFun();case 4:return t.next=6,e.isFriend();case 6:e.getInfo();case 7:case"end":return t.stop()}},t,e)}))()}},ce={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,title:this.messageBox.title,canInput:this.messageBox.canInput,hasCancel:this.messageBox.hasCancel},on:{cancel:e.cancel,confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),this.isMe?s("Message-box",{attrs:{clear:e.clear,messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,title:this.messageBox.title,canEditorInfo:this.messageBox.canEditorInfo,myInfoSpe:JSON.parse(JSON.stringify(e.userInfo)),hasCancel:this.messageBox.hasCancel},on:{cancel:e.cancel,confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]):e._e(),e._v(" "),s("Header",{attrs:{goback:"true",chatTitle:"用户资料"}}),e._v(" "),s("div",{staticClass:"chat-wrapper-no-footer"},[s("div",{staticClass:"secret-box-spe"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-box"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconniu"}})])]),e._v(" "),s("p",{staticClass:"href"},[s("span",{on:{click:e.goGithub}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconGitHub"}})])]),e._v(" "),s("span",{on:{click:e.goWebsite}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconWorld-WideWeb"}})])])]),e._v(" "),this.isMyFriend?s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconbeizhu"}})]),e._v(" "),s("span",[e._v("备注")]),e._v("："+e._s(this.remark)+"\n        ")]):e._e(),e._v(" "),s("p",[s("span",[e._v("用户名")]),e._v("："+e._s(e.userInfo.name)+"\n        ")]),e._v(" "),s("p",[s("span",[e._v("性别")]),e._v("："+e._s(1==e.userInfo.sex?"男":"女")+" "),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[1==e.userInfo.sex?s("use",{attrs:{"xlink:href":"#iconxingbienan"}}):s("use",{attrs:{"xlink:href":"#iconxingbienv"}})])]),e._v(" "),s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconplaceholder"}})]),e._v(" "),s("span",[e._v("来自")]),e._v("："+e._s(e.userInfo.place)+"\n        ")])]),e._v(" "),this.isAddingMe?s("div",{staticClass:"action"},[s("span",{staticClass:"add-as-friend",on:{click:e.agreeBeFriend}},[e._v("通过验证")])]):e._e(),e._v(" "),!0===this.isMyFriend&&!0===this.isHisFriend?s("div",{staticClass:"action-box"},[s("div",{staticClass:"action"},[s("span",{staticClass:"primary-span editor-remark",on:{click:e.editorRemark}},[e._v("修改备注")]),e._v(" "),s("span",{staticClass:"primary-span go-chat",on:{click:e.goChat}},[e._v("发消息")])]),e._v(" "),s("div",{staticClass:"action"},[s("span",{staticClass:"warning-span shield-it",on:{click:e.shieldIt}},[e._v("屏蔽此人")]),e._v(" "),s("span",{staticClass:"warning-span de-friended",on:{click:e.deFriended}},[e._v("删除好友")])])]):e._e(),e._v(" "),!0===this.isMyFriend&&!1===this.isHisFriend?s("div",{staticClass:"action"},[s("span",{staticClass:"warning-span de-friended",on:{click:e.deFriended}},[e._v("删除好友")]),e._v(" "),s("span",{staticClass:"primary-span add-as-friend",on:{click:e.enterReqPage}},[e._v("让对方重新加自己为好友")])]):e._e(),e._v(" "),!1===this.isMyFriend&&!0===this.isHisFriend&&!1===this.isAddingMe?s("div",{staticClass:"action"},[s("span",{staticClass:"primary-span add-as-friend",on:{click:e.enterReqPage}},[e._v("加为好友")])]):e._e(),e._v(" "),!1===this.isMyFriend&&!1===this.isHisFriend&&!1===this.isAddingMe&&!1===this.isMe?s("div",{staticClass:"action"},[s("span",{staticClass:"primary-span add-as-friend",on:{click:e.enterReqPage}},[e._v("加为好友")])]):e._e(),e._v(" "),this.isMe?s("div",{staticClass:"action"},[s("span",{staticClass:"primary-span editor-info",on:{click:function(t){return e.editorInfo("basic")}}},[e._v("编辑我的信息")]),e._v(" "),e.userInfo.github_id?e._e():s("span",{staticClass:"primary-span editor-info",on:{click:function(t){return e.editorInfo("password")}}},[e._v("修改密码")])]):e._e()])])],1)},staticRenderFns:[]};var ue=s("VU/8")(oe,ce,!1,function(e){s("DNSH")},"data-v-750c80e0",null).exports,pe={components:{Header:C},data:function(){return{textAreaContent:"您好，我想加您为好友",messageBox:{visible:!1,message:"",hasCancel:!0,messageBoxEvent:""},fromUserInfo:{}}},computed:{},watch:{},methods:w()({},Object(I.b)(["insertNewFriends"]),{send:function(){var e=this;socketWeb.emit("sendRequest",{from_user:this.fromUserInfo.user_id,to_user:this.$route.params.user_id,name:this.fromUserInfo.name,avatar:this.fromUserInfo.avatar,sex:this.fromUserInfo.sex,content:this.textAreaContent,time:S((new Date).getTime())});var t={to_user:this.$route.params.user_id,content:this.textAreaContent,time:S((new Date).getTime()),status:0};this.insertNewFriends(t).then(function(t){t&&(e.messageBox.messageBoxEvent="send",e.messageBox.visible=!0,e.messageBox.message="发送成功，等候回复哦")})},confirm:function(e){if("send"===e){this.$router.push("/message")}},cancel:function(e){this.messageBox.visible=!1}}),mounted:function(){this.fromUserInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo"))}},me={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,hasCancel:this.messageBox.hasCancel},on:{cancel:e.cancel,confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("Header",{attrs:{goback:"true",chatTitle:"用户申请"}}),e._v(" "),s("div",{staticClass:"chat-wrapper-spe"},[s("div",{staticClass:"secret-box-spe"},[s("p",[e._v("你需要发送验证申请，等对方通过")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.textAreaContent,expression:"textAreaContent"}],attrs:{rows:"5",maxlength:"60"},domProps:{value:e.textAreaContent},on:{input:function(t){t.target.composing||(e.textAreaContent=t.target.value)}}}),e._v(" "),s("div",{staticClass:"action",on:{click:e.send}},[s("span",{staticClass:"primary-span"},[e._v("发 送")])])])])],1)},staticRenderFns:[]};var le=s("VU/8")(pe,me,!1,function(e){s("5+69")},"data-v-558af6ec",null).exports,de={components:{Header:C,Footer:M,Nothing:X},data:function(){return{currentTab:3,friend:"hover",group:"",alreadyFriends:["1"],alreadyGroups:["1"]}},computed:{},watch:{},methods:w()({},Object(I.b)(["getAlreadyFriends","getAlreadyGroups"]),{enterIt:function(e,t){"friend"===t?this.$router.push("/user_info/"+e):"group"===t&&this.$router.push("/group_chat/"+e)},showFriends:function(){this.friend="hover",this.group=""},showGroups:function(){this.friend="",this.group="hover"},newFriendList:function(){this.$router.push({path:"contact_list/new_friends"})},alreadyFriendsList:function(){var e=this;this.$loading.show(),this.getAlreadyFriends().then(function(t){t&&(e.$loading.hide(),e.alreadyFriends=t.data.alreadyFriends)})},alreadyGroupsList:function(){var e=this;this.getAlreadyGroups().then(function(t){t&&(e.alreadyGroups=t.data.alreadyGroups)})}}),mounted:function(){m.a.all([this.alreadyFriendsList(),this.alreadyGroupsList()])}},fe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{currentTab:e.currentTab}}),e._v(" "),s("div",{staticClass:"new-friend",on:{click:e.newFriendList}},[s("svg",{staticClass:"icon img",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconfriends"}})]),s("span",[e._v("新朋友")]),e._v(" "),s("svg",{staticClass:"icon enter",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconright"}})])]),e._v(" "),s("p",{staticClass:"tab"},[s("span",{class:e.friend,on:{click:e.showFriends}},[e._v("朋友")]),e._v(" "),s("span",{class:e.group,on:{click:e.showGroups}},[e._v("群组")])]),e._v(" "),s("div",{staticClass:"chat-wrapper-contract-list"},[s("div",{staticClass:"secret-box"},[e.friend?s("ul",[0===e.alreadyFriends.length?s("Nothing",{attrs:{name:"加好友",type:"addAuthor"}}):e._l(e.alreadyFriends,function(t,n){return s("li",[s("div",{staticClass:"list-box",on:{click:function(s){return e.enterIt(t.other_user_id,"friend")}}},[s("img",{attrs:{src:t.avatar,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.name))]),e._v(" "),s("p",[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[0===t.sex?s("use",{attrs:{"xlink:href":"#iconxingbienan"}}):s("use",{attrs:{"xlink:href":"#iconxingbienv"}})])])]),e._v(" "),s("div",{staticClass:"remark"},[e._v(e._s(""===t.remark?"没有留下备注~":t.remark))])])])})],2):e._e(),e._v(" "),e.group?s("ul",[0===e.alreadyGroups.length?s("Nothing",{attrs:{name:"加群",type:"addGroup"}}):e._l(e.alreadyGroups,function(t,n){return s("li",[s("div",{staticClass:"list-box",on:{click:function(s){return e.enterIt(t.group_id,"group")}}},[s("img",{attrs:{src:t.avatar,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.group_name))]),e._v(" "),s("p",[e._v("群主："+e._s(t.group_creater))])]),e._v(" "),""===t.group_notice?s("div",{staticClass:"remark"},[e._v("没有留下公告~")]):s("div",{staticClass:"remark"},[e._v(e._s(e._f("dotdot")(t.group_notice,16)))])])])})],2):e._e()])]),e._v(" "),s("Footer",{attrs:{currentTab:e.currentTab}})],1)},staticRenderFns:[]};var ge=s("VU/8")(de,fe,!1,function(e){s("Me1Z")},"data-v-9484acc8",null).exports,he={components:{Header:C,Nothing:X},data:function(){return{userInfo:{},time:""}},computed:w()({},Object(I.c)(["newFriendGetter"])),watch:{},methods:w()({},Object(I.b)(["getNewFriends","beFriends","updateNewFriendsState"]),{enterIt:function(e){this.$router.push("/user_info/"+e)},agreeBeFriend:function(e){var t=this;return _()(h.a.mark(function s(){return h.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.beFriends({other_user_id:e,time:S((new Date).getTime())}),t.updateNewFriends(e);case 2:case"end":return s.stop()}},s,t)}))()},updateNewFriends:function(e){var t=this;return _()(h.a.mark(function s(){var n,a;return h.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t.updateNewFriendsState({from_user:e}),n={},t.newFriendGetter.forEach(function(t){t.from_user==e&&(t.status=1,n={avatar:t.avatar,id:e,other_user_id:e,message:"我们已成为好友，开始聊天吧！",time:S((new Date).getTime()),name:t.name,type:"private",action:"push"})}),t.$store.commit("updateListMutation",n),a={from_user:t.userInfo.user_id,to_user:e,name:t.userInfo.name,avatar:t.userInfo.avatar,message:n.message,type:"private",action:"request",status:"1",time:S((new Date).getTime())},socketWeb.emit("sendPrivateMsg",a);case 6:case"end":return s.stop()}},s,t)}))()}}),created:function(){this.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),this.$store.commit("friendReqTipsMutation",!1),this.getNewFriends({user_id:this.userInfo.user_id})}},ve={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:"新好友通知"}}),e._v(" "),s("div",{staticClass:"chat-wrapper-no-footer"},[s("div",{staticClass:"secret-box"},[s("ul",[0===e.newFriendGetter.length?s("Nothing",{attrs:{name:"加好友",type:"addAuthor"}}):e._e(),e._v(" "),e._l(e.newFriendGetter,function(t){return s("li",{attrs:{else:""}},[s("div",{staticClass:"list-box",on:{click:function(s){return e.enterIt(t.from_user)}}},[s("img",{attrs:{src:t.avatar,alt:""}}),e._v(" "),s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.name))]),e._v(" "),s("p",[e._v(e._s(t.content))])])]),e._v(" "),s("div",{staticClass:"result"},[0===t.status?s("span",{staticClass:"agree-btn",on:{click:function(s){return e.agreeBeFriend(t.from_user)}}},[e._v("同意")]):e._e(),e._v(" "),1===t.status?s("span",[e._v("已通过验证")]):e._e()])])})],2)])])],1)},staticRenderFns:[]};var _e=s("VU/8")(he,ve,!1,function(e){s("7yem")},"data-v-0cd49fdc",null).exports,be=s("Gu7T"),we=s.n(be),xe={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("section",{staticClass:"loading"},[t("span"),this._v(" "),t("span"),this._v(" "),t("span"),this._v(" "),t("span"),this._v(" "),t("span"),this._v(" "),t("span"),this._v(" "),t("span"),this._v(" "),t("span")])}]};var Ce={components:{Loading:s("VU/8")(null,xe,!1,function(e){s("JGmR")},"data-v-4eae6fcd",null).exports},props:{isNoMore:{type:Boolean,default:!1,required:!0},isShowLoading:{type:Boolean,default:!1,required:!0}},methods:{loadMore:function(){this.$emit("load-more")}}},Ie={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"load-more",on:{click:e.loadMore}},[s("p",{directives:[{name:"show",rawName:"v-show",value:!e.isNoMore&&!e.isShowLoading,expression:"!isNoMore && !isShowLoading"}],staticClass:"has-more"},[e._v("加载更多")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:e.isNoMore,expression:"isNoMore"}],staticClass:"no-more"},[e._v("没有更多了")]),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.isShowLoading,expression:"isShowLoading"}]})],1)},staticRenderFns:[]};var ye=s("VU/8")(Ce,Ie,!1,function(e){s("g9ug")},"data-v-3362ff2d",null).exports,ke=s("KMaP"),Me={name:"inputArea",components:{Picker:ke.Picker},props:["inputMsgData"],data:function(){return{inputMsg:"",btnInfo:"发送",showEmojiPicker:!1,emojiSelect:!1}},computed:w()({},Object(I.c)(["isMobile","tabTipsGetter"])),watch:{showEmojiPicker:function(){this.$emit("showEmojiPickerFunc",this.showEmojiPicker)},inputMsgData:function(){this.inputMsg=this.inputMsgData,this.$refs.textarea.focus()}},methods:w()({},Object(I.b)([""]),{clickTextArea:function(){var e=this.$refs.textarea;this.isMobile&&(this.showEmojiPicker=!1,this.emojiSelect=!1,e.focus())},getFocus:function(){var e=this.$refs.textarea;this.isMobile?this.emojiSelect?(this.showEmojiPicker=!0,e.blur()):(this.showEmojiPicker=!1,e.focus()):e.focus()},toggleEmojiPicker:function(){this.$loading.show(),this.showEmojiPicker=!this.showEmojiPicker;var e=this.$refs.textarea;this.isMobile&&this.showEmojiPicker?e.blur():e.focus(),this.$loading.hide()},addEmoji:function(e){this.emojiSelect=!0;var t=this.$refs.textarea,s=t.selectionEnd,n=this.inputMsg.substring(0,t.selectionStart),a=this.inputMsg.substring(t.selectionStart);this.inputMsg=n+e.native+a,this.$nextTick(function(){t.selectionEnd=s+e.native.length,t.focus()})},sendMessage:function(e){this.inputMsg="",this.$emit("sendMessageFunc",e)}})},$e={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"input-msg",class:{"input-msg-select":e.showEmojiPicker}},[e.showEmojiPicker?s("picker",{staticClass:"emoji-select",attrs:{title:"Pick your emoji...",emoji:"point_up"},on:{select:e.addEmoji}}):e._e(),e._v(" "),s("svg",{staticClass:"svg-icon",class:{triggered:e.showEmojiPicker},attrs:{viewBox:"0 0 24 24"},on:{mousedown:function(t){return t.preventDefault(),e.toggleEmojiPicker(t)}}},[s("path",{attrs:{fill:"#E6A23C",d:"M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M17,9.5C17,10.3 16.3,11 15.5,11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5M12,17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,17.23Z"}})]),e._v(" "),s("div",{staticClass:"input-box"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputMsg,expression:"inputMsg"}],ref:"textarea",staticStyle:{"-webkit-user-select":"text !important"},attrs:{placeholder:"输入..."},domProps:{value:e.inputMsg},on:{click:e.clickTextArea,focus:function(t){return e.getFocus()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(e.inputMsg))},input:function(t){t.target.composing||(e.inputMsg=t.target.value)}}})]),e._v(" "),s("p",{staticClass:"btn",class:{enable:""!=e.inputMsg},on:{click:function(t){return e.sendMessage(e.inputMsg)}}},[e._v(e._s(e.btnInfo))])],1)},staticRenderFns:[]};var Be=s("VU/8")(Me,$e,!1,function(e){s("4FET")},"data-v-70dd396c",null).exports,Fe={components:{Header:C,ChatItem:F,LoadMore:ye,InputArea:Be},data:function(){return{page:1,pageNum:20,isShowLoading:!1,isNoMore:!1,inputMsg:"",privateDetail:[],toUserInfo:{to_user:"",avatar:"",sex:"",place:"",status:""},isMyFriend:!1,isHisFriend:!1,fromUserInfo:{},btnInfo:"发送",remarkName:"",anotherRemarkName:"",type:"bottom",viewBox:"",beforeScrollHeight:"",afterScrollHeight:"",showEmojiPicker:!1}},computed:w()({},Object(I.c)(["someOneInfoGetter"])),watch:{privateDetail:function(){this.viewBox=this.$refs.viewBox,"bottom"==this.type?this.refresh():this.nofresh()}},methods:w()({},Object(I.b)(["getPrivateDetail","isFriendJudge","queryUserInfoSpecial","savePrivateMsg"]),{showEmojiPickerFunc:function(e){this.showEmojiPicker=e,this.refresh()},sendMessageFunc:function(e){this.inputMsg=e,this.sendMessage()},getPrivateMsg:function(){var e=this,t={page:this.page,pageNum:this.pageNum,to_user:this.toUserInfo.to_user};this.$loading.show(),this.getPrivateDetail(t).then(function(t){e.$loading.hide(),t.success&&(e.type="bottom",e.privateDetail=t.data.privateDetail,(0==e.privateDetail.length||t.data.privateDetail.length<e.pageNum)&&(e.isNoMore=!0),e.privateDetail.forEach(function(e){e.time=e.time,e.message=e.message.split(":")[1]}))}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})})},sendMessage:function(){""!=this.inputMsg.trim()&&(this.isMyFriend?this.isHisFriend?(this.type="bottom",this.sendMsgBySocket(),this.saveMsgByDB()):this.$message({message:"您不是ta的好友，请先加ta为好友",type:"error"}):this.$message({message:"ta不是您的好友，请先加ta为好友",type:"error"}))},sendMsgBySocket:function(){var e={from_user:this.fromUserInfo.user_id,to_user:this.toUserInfo.to_user,name:this.fromUserInfo.name,remark:this.remarkName,avatar:this.fromUserInfo.avatar,message:this.inputMsg,type:"private",status:"1",time:S((new Date).getTime())};e.remark=this.anotherRemarkName,socketWeb.emit("sendPrivateMsg",e),this.$store.commit("updateListMutation",e)},saveMsgByDB:function(){var e=this,t={from_user:this.fromUserInfo.user_id,to_user:this.toUserInfo.to_user,name:this.fromUserInfo.name,remark:this.remarkName,avatar:this.fromUserInfo.avatar,message:this.inputMsg,status:"1",time:S((new Date).getTime())};this.savePrivateMsg(t).then(function(s){s&&(e.inputMsg="",e.privateDetail.push(t))}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})})},getMsgBySocket:function(){var e=this;socketWeb.removeAllListeners("getPrivateMsg"),socketWeb.on("getPrivateMsg",function(t){if(t.from_user!=e.toUserInfo.to_user)return t.chatOfNow=!1,void e.$store.commit("updateListMutation",t);t.chatOfNow=!0,e.$store.commit("updateListMutation",t),e.privateDetail.push(t)})},isFriend:function(){var e=this,t={other_user_id:this.toUserInfo.to_user};this.isFriendJudge(t).then(function(t){t&&(e.isMyFriend=0!==t.data.isMyFriend.length,e.isHisFriend=0!==t.data.isHisFriend.length,t.data.isHisFriend.length>0&&t.data.isMyFriend.length>0&&(e.remarkName=t.data.isMyFriend[0].remark,e.anotherRemarkName=t.data.isHisFriend[0].remark))}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})})},resetUnred:function(){this.$store.commit("resetUnredMutation",this.toUserInfo.to_user)},refresh:function(){var e=this;setTimeout(function(){e.viewBox.scrollTop=e.viewBox.scrollHeight},100)},nofresh:function(){var e=this;setTimeout(function(){e.afterScrollHeight=e.viewBox.scrollHeight-e.beforeScrollHeight,e.viewBox.scrollTop=e.afterScrollHeight},100)},loadMore:function(){var e=this;if(console.log("加載更多"),this.beforeScrollHeight=this.viewBox.scrollHeight,!this.isNoMore){this.isShowLoading=!0,this.page=this.page+1;var t={page:this.page,pageNum:this.pageNum,to_user:this.toUserInfo.to_user};this.getPrivateDetail(t).then(function(t){var s;t.success&&(e.type="unBottom",t.data.privateDetail.length<e.pageNum&&(e.isNoMore=!0),t.data.privateDetail.forEach(function(e){e.time=e.time,e.message=e.message.split(":")[1]}),(s=e.privateDetail).unshift.apply(s,we()(t.data.privateDetail)),e.isShowLoading=!1)})}}}),created:function(){this.toUserInfo.to_user=this.$route.params.user_id,this.fromUserInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),this.isFriend(),this.resetUnred(),this.getPrivateMsg(),this.getMsgBySocket(),this.queryUserInfoSpecial({user_id:this.toUserInfo.to_user})}},Ge={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",userInfo:"true",chatTitle:e.remarkName?e.remarkName:e.someOneInfoGetter.name}}),e._v(" "),s("div",{staticClass:"chat-wrapper",class:{"chat-wrapper-emoji":e.showEmojiPicker}},[s("div",{staticClass:"secret-box-spe"},[s("ul",{ref:"viewBox"},[s("load-more",{attrs:{"is-no-more":e.isNoMore,"is-show-loading":e.isShowLoading},on:{"load-more":e.loadMore}}),e._v(" "),e._l(e.privateDetail,function(t){return s("li",[e.fromUserInfo.user_id===t.from_user?s("ChatItem",{attrs:{href:t.from_user,img:t.avatar,me:"true",msg:t.message,name:t.name,time:t.time}}):s("ChatItem",{attrs:{img:t.avatar,msg:t.message,href:t.from_user,name:e.remarkName?e.remarkName:t.name,time:t.time}})],1)})],2)])]),e._v(" "),s("input-area",{attrs:{inputMsgData:e.inputMsg},on:{showEmojiPickerFunc:e.showEmojiPickerFunc,sendMessageFunc:e.sendMessageFunc}})],1)},staticRenderFns:[]};var Ee=s("VU/8")(Fe,Ge,!1,function(e){s("6Ak+")},"data-v-2f440244",null).exports,Se={name:"message",data:function(){return{currentTab:4,messageBox:{visible:!1,message:"",hasCancel:!0,messageBoxEvent:""},userInfo:{}}},components:{Header:C,Footer:M},methods:{goInfo:function(){var e="/user_info/"+this.userInfo.user_id;this.$router.push(e)},logout:function(){this.messageBox.messageBoxEvent="logOut",this.messageBox.visible=!0,this.messageBox.message="确定退出？"},cancel:function(e){this.messageBox.visible=!1},confirm:function(e){if("logOut"===e){this.$store.commit("firstLoadMutation",!0),this.$store.commit("firstLoadMutation",!0),socketWeb.emit("logout",this.userInfo.user_id),localStorage.removeItem("HappyChatUserToken"),localStorage.removeItem("HappyChatUserInfo");var t=this;setTimeout(function(){t.$router.push({path:"/login"})},1e3)}},goGithub:function(){this.userInfo.github?window.location.href=this.userInfo.github:this.$message({message:"对方尚未放他的github链接哦",type:"warn"})},goWebsite:function(){this.userInfo.website?window.location.href=this.userInfo.website:this.$message({message:"对方尚未放他的网站链接哦",type:"warn"})}},mounted:function(){this.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo"))}},Ne={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,hasCancel:this.messageBox.hasCancel},on:{cancel:e.cancel,confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("Header",{attrs:{currentTab:e.currentTab}}),e._v(" "),s("div",{staticClass:"chat-wrapper-spe"},[s("div",{staticClass:"secret-box-spe"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-box"},[s("img",{attrs:{src:e.userInfo.avatar,alt:""}}),e._v(" "),s("p",{staticClass:"name"},[e._v(e._s(e.userInfo.name))]),e._v(" "),s("p",{staticClass:"href"},[s("span",{on:{click:e.goGithub}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconGitHub"}})])]),e._v(" "),s("span",{on:{click:e.goWebsite}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconWorld-WideWeb"}})])])]),e._v(" "),s("p",{staticClass:"user-intro"},[e._v(e._s(null==e.userInfo.intro?"没有留下介绍~":e.userInfo.intro))]),e._v(" "),s("p",{staticClass:"user-more"},[s("span",{on:{click:e.goInfo}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconacmore"}})]),e._v("更多信息")])])])]),e._v(" "),s("div",{staticClass:"action"},[s("span",{staticClass:"warning-span",on:{click:e.logout}},[e._v("退出登录")])])])]),e._v(" "),s("Footer",{attrs:{currentTab:e.currentTab}})],1)},staticRenderFns:[]};var Te=s("VU/8")(Se,Ne,!1,function(e){s("RKiA")},"data-v-169608e0",null).exports,Ue={data:function(){return{userInfo:{},groupInfo:{group_name:"",group_notice:"",group_avatar:"#icongroup",group_creater:"",creater_time:"",update_time:""},group_id:"",messageBox:{visible:!1,message:"",messageBoxEvent:""},editGroupId:this.$route.params.group_id}},computed:{},components:{Header:C},methods:w()({},Object(I.b)(["confirmCreateGroup","confirmJoinGroup","confirmEditGroup","getGroupInformation"]),{createGroup:function(){var e=this;if(this.groupInfo.creater_time=S((new Date).getTime()),this.groupInfo.group_creater=this.userInfo.name,this.groupInfo.group_name&&this.groupInfo.group_notice)this.confirmCreateGroup(this.groupInfo).then(function(t){if(t.success){e.group_id=t.data.group_id;var s={message:"创建群成功！",time:e.groupInfo.creater_time,group_name:e.groupInfo.group_name,group_avatar:e.groupInfo.group_avatar,type:"group",action:"push",id:e.group_id,group_id:e.group_id};e.$store.commit("updateListMutation",s),e.joinGroup()}else e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})});else{var t=void 0;""===this.groupInfo.group_name.trim()&&(t="请输入群名"),""===this.this.groupInfo.group_notice.trim()&&(t="请输入群公告"),this.$message({message:t,type:"warn"})}},editGroup:function(){var e=this;if(this.groupInfo.update_time=S((new Date).getTime()),this.groupInfo.group_name&&this.groupInfo.group_notice)this.groupInfo.editGroupId=this.editGroupId,this.confirmEditGroup(this.groupInfo).then(function(t){t.success&&(e.messageBox.messageBoxEvent="updateGroup",e.messageBox.visible=!0,e.messageBox.message="修改群成功")});else{var t=void 0;""===this.groupInfo.group_name.trim()&&(t="请输入群名"),""===this.this.groupInfo.group_notice.trim()&&(t="请输入群公告"),this.$message({message:t,type:"warn"})}},joinGroup:function(){var e=this;this.confirmJoinGroup({group_id:this.group_id}).then(function(t){t.success?(e.messageBox.messageBoxEvent="createGroup",e.messageBox.visible=!0,e.messageBox.message="创建群成功"):e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){var s=t.response.error;e.$message({message:s,type:"error"})})},confirm:function(e){"createGroup"===e?this.$router.push({path:"/message"}):"updateGroup"===e&&this.$router.push({path:"/group_chat/"+this.editGroupId})}}),created:function(){var e=this;this.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),this.editGroupId&&this.getGroupInformation({groupId:this.editGroupId}).then(function(t){t.success&&(e.groupInfo=t.data.groupInfo[0])})}},Le={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:"群资料"}}),e._v(" "),s("Message-box",{attrs:{messageBoxEvent:this.messageBox.messageBoxEvent,visible:this.messageBox.visible,hasCancel:!1},on:{confirm:e.confirm}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(this.messageBox.message))])]),e._v(" "),s("div",{staticClass:"chat-wrapper-no-footer"},[s("div",{staticClass:"secret-box-spe"},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-box"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"User Icon","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icongroup"}})])]),e._v(" "),s("p",[e._v("群名:"),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.groupInfo.group_name,expression:"groupInfo.group_name"}],staticStyle:{"-webkit-user-select":"text !important"},attrs:{type:"text",placeholder:"不超过10个字哦",maxlength:"10"},domProps:{value:e.groupInfo.group_name},on:{input:function(t){t.target.composing||e.$set(e.groupInfo,"group_name",t.target.value)}}})]),e._v(" "),s("p",[e._v("群公告:"),s("br"),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.groupInfo.group_notice,expression:"groupInfo.group_notice"}],staticStyle:{"-webkit-user-select":"text !important"},attrs:{rows:"4",type:"text",placeholder:"不超过40个字哦",maxlength:"40"},domProps:{value:e.groupInfo.group_notice},on:{input:function(t){t.target.composing||e.$set(e.groupInfo,"group_notice",t.target.value)}}})]),e._v(" "),e.editGroupId?s("div",{staticClass:"action",on:{click:e.editGroup}},[s("span",{staticClass:"creat_group"},[e._v("编辑群")])]):s("div",{staticClass:"action",on:{click:e.createGroup}},[s("span",{staticClass:"creat_group"},[e._v("确定建群")])])])])])],1)},staticRenderFns:[]};var He=s("VU/8")(Ue,Le,!1,function(e){s("vHir")},"data-v-641eee6a",null).exports,De={data:function(){return{groupInfo:{},userInfo:{},shareGroupUrl:window.location,ownerFlag:!1}},props:{groupMembers:Array,groupInfoGetter:Object,isMyGroup:Boolean},computed:{},methods:w()({},Object(I.b)(["getGroupInformation","judgeIsInGroup","addGroupChatRelation","exitChatGroup"]),{goEditGroup:function(){this.$router.push({path:"/edit_group/"+this.$route.params.group_id})},getGroupInfo:function(){var e=this,t={groupId:this.$route.params.group_id};this.getGroupInformation(t).then(function(t){t.success?e.groupInfo=t.data.groupInfo[0]:e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){console.log("err",t);var s=t.error;e.$message({message:s,type:"error"})})},exitGroup:function(){var e=this,t={user_id:this.userInfo.user_id,group_id:this.$route.params.group_id};this.exitChatGroup(t).then(function(t){var s={action:"delete",id:e.$route.params.group_id};t.success?(e.$store.commit("updateListMutation",s),e.$router.push("/message")):e.$message({message:"服务器出错啦",type:"error"})}).catch(function(t){console.log("err",t);var s=t.error;e.$message({message:s,type:"error"})})},goChat:function(){this.addGroupUserRelation()},addGroupUserRelation:function(){var e=this,t={groupId:this.groupInfoGetter.group_id};this.addGroupChatRelation(t).then(function(t){if(t.success){e.getChatMsg();var s={action:"push",message:"您已成功加入此群！",group_avatar:e.groupInfoGetter.group_avatar,group_name:e.groupInfoGetter.group_name,time:e.groupInfoGetter.creater_time,group_id:e.groupInfoGetter.group_id,type:"group",id:e.groupInfoGetter.group_id};e.$store.commit("updateListMutation",s),e.isMyGroup=!0}else e.$message({message:t.message,type:"warn"})})},goInfo:function(e){var t="/user_info/"+e.user_id;this.$router.push(t)},copyGroupUrl:function(){var e=this.$message;this.$copyText(this.shareGroupUrl).then(function(t){e({message:"复制成功",type:"success"})},function(t){e({message:"复制失败",type:"error"})})}}),created:function(){var e=this;return _()(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),e.groupInfoGetter.group_creater==e.userInfo.name&&(e.ownerFlag=!0);case 2:case"end":return t.stop()}},t,e)}))()}},Pe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper-group"},[s("div",{staticClass:"info"},[s("p",{staticClass:"notice-title"},[e._v("群公告")]),e._v(" "),s("p",{staticClass:"notice-content"},[e._v(e._s(e.groupInfoGetter.group_notice))]),e._v(" "),s("p",{staticClass:"notice-title"},[e._v("群创建者："),s("span",{staticClass:"notice-content"},[e._v(e._s(e.groupInfoGetter.group_creater))])]),e._v(" "),s("p",{staticClass:"notice-title"},[e._v("群人数："),s("span",{staticClass:"member-number"},[e._v(e._s(e.groupMembers.length))])]),e._v(" "),s("p",{staticClass:"notice-title"},[e._v("群创建时间："),s("span",{staticClass:"notice-content"},[e._v(e._s(e.groupInfoGetter.creater_time))])]),e._v(" "),s("p",{staticClass:"edit-group-box"},[e.groupInfoGetter.group_creater==e.userInfo.name?s("span",{staticClass:"edit-group-info",on:{click:e.goEditGroup}},[e._v("修改群资料")]):e._e()])]),e._v(" "),s("ul",{class:e.ownerFlag?"members-spe":"members"},e._l(e.groupMembers,function(t,n){return s("li",{staticClass:"member"},[s("div",{staticClass:"list-box",on:{click:function(s){return e.goInfo(t)}}},[s("div",{staticClass:"avatar"},[e._v(e._s(t.avatar))]),e._v(" "),s("span",{staticClass:"member-name"},[e._v(e._s(t.name))])])])}),0),e._v(" "),s("div",{staticClass:"box-button-group"},[e.isMyGroup?s("span",{staticClass:"warning-button button-spe",on:{click:e.copyGroupUrl}},[e._v("分享群链接")]):e._e(),e._v(" "),e.isMyGroup?s("span",{staticClass:"warning-button button-spe",on:{click:e.exitGroup}},[e._v("退出群聊")]):s("span",{staticClass:"base-button button join-group-spe",on:{click:e.goChat}},[e._v("加入群聊")])])])},staticRenderFns:[]};var Re=s("VU/8")(De,Pe,!1,function(e){s("tLKz")},"data-v-2136b901",null).exports,je={components:{Header:C,ChatItem:F,LoadMore:ye,GroupInfo:Re,InputArea:Be},data:function(){return{page:1,pageNum:20,isShowLoading:!1,isNoMore:!1,groupInfo:{groupId:""},groupAvator:"",groupMember:[],message:[],inputMsg:"",userInfo:{},type:"bottom",showGroupInfoDialog:!1,groupMembers:[],isMyGroup:null,viewBox:"",beforeScrollHeight:"",afterScrollHeight:"",showEmojiPicker:!1,keyWordHeight:""}},computed:w()({},Object(I.c)(["groupInfoGetter","groupMemberGetter"])),watch:{message:function(){this.viewBox=this.$refs.viewBox,"bottom"==this.type?this.refresh():this.nofresh()}},methods:w()({},Object(I.b)(["getGroupChat","saveGroupChatMsg","addGroupChatRelation","judgeIsInGroup"]),{showEmojiPickerFunc:function(e){var t=this;this.showEmojiPicker=e,this.$nextTick(function(){t.viewBoxHeight=t.$refs.viewBox.clientHeight,t.keyWordHeight=document.body.clientHeight-t.viewBoxHeight-176}),this.refresh()},sendMessageFunc:function(e){this.inputMsg=e,this.sendMessage()},getChatMsg:function(){var e=this,t={page:this.page,pageNum:this.pageNum,groupId:this.groupInfo.groupId};this.$loading.show(),this.getGroupChat(t).then(function(t){e.$loading.hide(),t.success?(e.type="bottom",e.message=t.data.groupMsg,e.groupMembers=t.data.groupMemberInfo,e.$store.commit("groupInfoMutation",t.data.groupInfo[0]),e.$store.commit("groupMemberMutation",t.data.groupMember),(0==e.message.length||e.message.length<e.pageNum)&&(e.isNoMore=!0),e.message.forEach(function(e){e.time=e.time,e.message=e.message.split(":")[1]})):e.$message({message:"服务器出错啦",type:"error"})})},sendMessage:function(){var e=this;return _()(h.a.mark(function t(){var s;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.inputMsg.trim()){t.next=2;break}return t.abrupt("return");case 2:s={groupId:e.groupInfo.groupId,group_name:e.groupInfoGetter.group_name,group_avatar:e.groupInfoGetter.group_avatar,groupMember:e.groupMemberGetter,from_user:e.userInfo.user_id,name:e.userInfo.name,avatar:e.userInfo.avatar,message:e.inputMsg,time:S((new Date).getTime())},e.type="bottom",socketWeb.emit("sendGroupMsg",s),e.saveMsgByDB();case 6:case"end":return t.stop()}},t,e)}))()},saveMsgByDB:function(){var e=this,t={groupId:this.groupInfo.groupId,message:this.inputMsg,name:this.userInfo.name,time:S((new Date).getTime())};this.saveGroupChatMsg(t).then(function(t){t.success?e.inputMsg="":e.$message({message:"服务器出错啦",type:"error"})})},addGroupUserRelation:function(){var e=this,t={groupId:this.groupInfo.groupId};this.addGroupChatRelation(t).then(function(t){if(t.success){e.getChatMsg();var s={action:"push",message:"您已成功加入此群！",group_avatar:e.groupInfoGetter.group_avatar,group_name:e.groupInfoGetter.group_name,time:e.groupInfoGetter.creater_time,group_id:e.groupInfoGetter.group_id,type:"group",id:e.groupInfoGetter.group_id};e.$store.commit("updateListMutation",s),e.isMyGroup=!0}else e.$message({message:t.message||"服务器出错啦",type:"warn"})})},getMsgBySocket:function(){var e=this;socketWeb.removeAllListeners("getGroupMsg"),socketWeb.on("getGroupMsg",function(t){e.groupMemberGetter.includes(e.userInfo.user_id)&&(t.type="group",t.groupId==e.groupInfo.groupId?(t.chatOfNow=!0,e.$store.commit("updateListMutation",t),e.message.push(t)):e.$store.commit("updateListMutation",t))})},resetUnred:function(){this.$store.commit("resetUnredMutation",this.groupInfo.groupId)},refresh:function(){var e=this;setTimeout(function(){e.viewBox.scrollTop=e.viewBox.scrollHeight},4)},nofresh:function(){var e=this;setTimeout(function(){e.afterScrollHeight=e.viewBox.scrollHeight-e.beforeScrollHeight,e.viewBox.scrollTop=e.afterScrollHeight},4)},loadMore:function(){var e=this;if(this.isMyGroup){if(this.beforeScrollHeight=this.viewBox.scrollHeight,!this.isNoMore){this.isShowLoading=!0,this.page=this.page+1;var t={page:this.page,pageNum:this.pageNum,groupId:this.groupInfo.groupId};this.getGroupChat(t).then(function(t){if(t.success){var s;if(e.type="unBottom",t.data.groupMsg.length<e.pageNum&&(e.isNoMore=!0),t.data.groupMsg.forEach(function(e){e.time=e.time,e.message=e.message.split(":")[1]}),0==t.data.groupMsg.length)return;(s=e.message).unshift.apply(s,we()(t.data.groupMsg)),e.isShowLoading=!1}})}}else this.$message({message:"请先加入群聊",type:"warn"})},showGroupInfoChild:function(e){this.showGroupInfoDialog=e},isInGroup:function(){var e=this,t={group_id:this.$route.params.group_id};this.judgeIsInGroup(t).then(function(t){t.success?e.isMyGroup=0!==t.data.group_user.length:e.$message({message:"服务器出错啦",type:"error"})})},goChat:function(){this.addGroupUserRelation()},handleScroll:function(){this.viewBox=this.$refs.viewBox},handleOnresize:function(){this.viewBox=this.$refs.viewBox,this.viewHeight=this.viewBox.clientHeight}}),created:function(){var e=this;return _()(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.groupInfo.groupId=e.$route.params.group_id,e.userInfo=JSON.parse(localStorage.getItem("HappyChatUserInfo")),t.next=4,e.isInGroup();case 4:return t.next=6,e.getChatMsg();case 6:e.resetUnred(),e.getMsgBySocket();case 8:case"end":return t.stop()}},t,e)}))()},mounted:function(){this.viewBoxHeight=this.$refs.viewBox.clientHeight}},Oe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",groupInfo:"true",chatTitle:e.groupInfoGetter.group_name},on:{showGroupInfo:e.showGroupInfoChild}}),e._v(" "),s("div",{staticClass:"chat-wrapper",class:{"chat-wrapper-emoji":e.showEmojiPicker}},[s("div",{staticClass:"secret-box-spe"},[s("ul",{ref:"viewBox"},[s("li",[s("load-more",{attrs:{"is-no-more":e.isNoMore,"is-show-loading":e.isShowLoading},on:{"load-more":e.loadMore}})],1),e._v(" "),e._l(e.message,function(t){return s("li",[e.userInfo.user_id===t.from_user?s("ChatItem",{attrs:{href:t.from_user,img:t.avatar,me:"true",msg:t.message,name:t.name,time:t.time}}):s("ChatItem",{attrs:{img:t.avatar,msg:t.message,href:t.from_user,name:t.name,time:t.time}})],1)})],2)])]),e._v(" "),e.showGroupInfoDialog?s("div",{staticClass:"chat-info-modal",on:{click:function(t){e.showGroupInfoDialog=!1}}}):e._e(),e._v(" "),e.showGroupInfoDialog?s("group-info",{staticClass:"chat-info",attrs:{groupMembers:e.groupMembers,groupInfoGetter:e.groupInfoGetter,isMyGroup:e.isMyGroup}}):e._e(),e._v(" "),e.isMyGroup?s("input-area",{attrs:{inputMsgData:e.inputMsg},on:{showEmojiPickerFunc:e.showEmojiPickerFunc,sendMessageFunc:e.sendMessageFunc}}):s("span",{staticClass:"base-button button join-group",on:{click:e.goChat}},[e._v("加入群聊")])],1)},staticRenderFns:[]};var Ae=s("VU/8")(je,Oe,!1,function(e){s("Uolv")},"data-v-92af6688",null).exports,qe={name:"feedback",data:function(){return{currentTab:5,feedback:{email:"",content:""},params:{page:1,pageNum:50},userInfo:JSON.parse(localStorage.getItem("HappyChatUserInfo"))}},components:{Header:C,Footer:M,Nothing:X},computed:w()({},Object(I.c)(["feedbackListData"])),methods:w()({},Object(I.b)(["getFeedback","submitFeedback"]),{onScroll:function(){console.log("留言反馈：置底操作加载新数据的指令输出")},submit:function(){var e=this,t=void 0;if(this.userInfo?(this.feedback.email=this.userInfo.email,this.feedback.user_id=this.userInfo.user_id,t=!0):t=E(this.feedback.email),t&&this.feedback.content.trim())this.$loading.show(),this.submitFeedback(this.feedback).then(function(t){e.$loading.hide(),t.success&&(e.feedback={},e.$message({message:t.message,type:"success"}),e.getFeedback(e.params))});else{var s=void 0;E(this.feedback.email)||(s="请输入正确的邮箱"),this.feedback.content.trim()||(s="请输入内容"),this.$message({message:s,type:"warn"})}}}),mounted:function(){var e=this;this.$loading.show(),this.getFeedback(this.params).then(function(t){e.$loading.hide()})}},We={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("Header",{attrs:{goback:"true",chatTitle:"留言反馈"}}),e._v(" "),s("div",{staticClass:"chat-wrapper-spe",class:{"chat-wrapper-feedback":!e.userInfo}},[s("div",{staticClass:"secret-box-spe",class:{"secret-box-feedback":!e.userInfo}},[s("div",{staticClass:"box-style"},[e.userInfo?e._e():s("div",{staticClass:"flex-style box-item"},[s("span",{staticClass:"title"},[e._v("邮  箱：")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback.email,expression:"feedback.email"}],attrs:{type:"text",placeholder:"请输入邮箱",maxlength:"30"},domProps:{value:e.feedback.email},on:{input:function(t){t.target.composing||e.$set(e.feedback,"email",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"flex-style"},[s("span",{staticClass:"title"},[e._v("内  容：")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.feedback.content,expression:"feedback.content"}],attrs:{rows:"3",type:"text",placeholder:"不超过50个字哦",maxlength:"50"},domProps:{value:e.feedback.content},on:{input:function(t){t.target.composing||e.$set(e.feedback,"content",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"action action-box-feedback"},[s("span",{staticClass:"primary-span",on:{click:e.submit}},[e._v("提   交")])])]),e._v(" "),s("hr"),e._v(" "),s("h2",[e._v("历史反馈")]),e._v(" "),e.feedbackListData.length>0?s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:e.onScroll,expression:"onScroll"}],staticClass:"feedback-box-history"},e._l(e.feedbackListData,function(t){return s("div",{staticClass:"feedback-item"},[s("div",{staticClass:"flex-style flex-style-feedback-history"},[s("p",{staticClass:"item-box"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"happyChat乐聊",title:"happyChat乐聊","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconEmail"}})]),e._v(" "),s("span",[e._v(e._s(t.email))])]),e._v(" "),s("p",{staticClass:"item-box"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"happyChat乐聊",title:"happyChat乐聊","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconIP"}})]),e._v(" "),s("span",[e._v(e._s(t.ip))])])]),e._v(" "),s("p",{staticClass:"item-content"},[e._v(e._s(t.content))]),e._v(" "),t.reply?s("p",{staticClass:"item-reply"},[s("span",{staticStyle:{color:"#E6A23C"}},[e._v("回复：")]),e._v(e._s(t.reply))]):e._e(),e._v(" "),s("p",{staticClass:"item-date"},[s("svg",{staticClass:"icon",attrs:{id:"icon",alt:"happyChat乐聊",title:"happyChat乐聊","aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icontime"}})]),e._v(" "),s("span",[e._v(e._s(t.date))])])])}),0):s("Nothing")],1)]),e._v(" "),e.userInfo?s("Footer",{attrs:{currentTab:e.currentTab}}):e._e()],1)},staticRenderFns:[]};var Ve=s("VU/8")(qe,We,!1,function(e){s("1pXV")},"data-v-119f027b",null).exports;u.a.use(f.a);var Je=new f.a({routes:[{path:"/",redirect:"/login"},{path:"/robot",component:H},{path:"/login",component:W},{path:"/register",component:R},{path:"/activate/:code",component:z},{path:"/message",component:ee},{path:"/add",component:ne},{path:"/add_seach/user/:username",component:ie},{path:"/user_info/:user_id",component:ue},{path:"/user_info/verify/:user_id",component:le},{path:"/contact_list",component:ge},{path:"/contact_list/new_friends",component:_e},{path:"/private_chat/:user_id",component:Ee},{path:"/me",component:Te},{path:"/creat_group",component:He},{path:"/edit_group/:group_id",component:He},{path:"/group_chat/:group_id",component:Ae},{path:"/group_info/:group_id",component:Re},{path:"/add_seach/group/:groupname",component:ie},{path:"/feedback",component:Ve}]}),ze=["/login","/register","/activate","/feedback"];Je.beforeEach(function(e,t,s){var n=ze.some(function(t){if(e.path.indexOf(t)>=0)return!0});localStorage.HappyChatUserToken?n&&"/feedback"!==e.path?s("/robot"):s():n?s():s("/login")});var Ze=Je;d.a.defaults.retry=4,d.a.defaults.retryDelay=1e3,u.a.prototype.axios=d.a;var Ke=d.a.create({baseURL:"https://chat.chengxinsong.cn",timeout:1e4});Ke.interceptors.request.use(function(e){var t=localStorage.getItem("HappyChatUserToken");return t&&(e.headers.common.Authorization="Bearer "+t),e},function(e){return m.a.reject(e)}),Ke.interceptors.response.use(function(e){var t=e.data;return t.data,t},function(e){if(e.response)switch(e.response.status){case 401:var t=JSON.parse(localStorage.getItem("HappyChatUserInfo"));socketWeb.emit("logout",t.user_id),localStorage.removeItem("HappyChatUserToken"),localStorage.removeItem("HappyChatUserInfo"),setTimeout(function(){Ze.push({path:"/login",query:{redirect:Ze.currentRoute.fullPath}})},500)}else e.response||MessageBox.confirm("您现在处于无网的状态，请确定网络正常后重试","提示",{confirmButtonText:"重新连接",type:"warning",center:!0,showClose:!1,showCancelButton:!1,closeOnClickModal:!1}).then(function(){console.log("我断网了"),window.location.reload()});return m.a.reject(e.response)});var Xe,Qe,Ye=function(e){var t={params:e};return Ke.get("/api/chat/robot",t)},et=function(e){return Ke.post("/api/chat/register",e)},tt=function(e){var t={params:e};return Ke.get("/api/chat/activate",t)},st=function(e){return Ke.post("/api/chat/login",e)},nt=function(e){var t={params:e};return Ke.get("/api/chat/message",t)},at=function(e){var t={params:e};return Ke.get("/api/chat/find_people",t)},rt=function(e){var t={params:e};return Ke.get("/api/chat/user_info",t)},it=function(e){var t={params:e};return Ke.get("/api/chat/get_newfriends",t)},ot=function(e){var t={params:e};return Ke.get("/api/chat/get_friends",t)},ct=function(e){var t={params:e};return Ke.get("/api/chat/get_groups",t)},ut=function(e){var t={params:e};return Ke.get("/api/chat/is_friend",t)},pt=function(e){return Ke.post("/api/chat/insert_newfriends",e)},mt=function(e){return Ke.post("/api/chat/be_friend",e)},lt=function(e){return Ke.put("/api/chat/update_newfriends",e)},dt=function(e){var t={params:e};return Ke.get("/api/chat/private_detail",t)},ft=function(e){return Ke.post("/api/chat/private_save_msg",e)},gt=function(e){return Ke.put("/api/chat/editor_remark",e)},ht=function(e){return Ke.put("/api/chat/editor_info",e)},vt=function(e){var t={params:e};return Ke.delete("/api/chat/del_friend",t)},_t=function(e){return Ke.post("/api/chat/create_group",e)},bt=function(e){return Ke.post("/api/chat/edit_group",e)},wt=function(e){return Ke.post("/api/chat/join_group",e)},xt=function(e){var t={params:e};return Ke.get("/api/chat/group_chat",t)},Ct=function(e){return Ke.post("/api/chat/group_chat_msg",e)},It=function(e){return Ke.post("/api/chat/group_chat_relation",e)},yt=function(e){var t={params:e};return Ke.get("/api/chat/get_group_info",t)},kt=function(e){var t={params:e};return Ke.get("/api/chat/is_in_group",t)},Mt=function(e){var t={params:e};return Ke.delete("/api/chat/exit_group",t)},$t=function(e){return Ke.post("/api/chat/pv_log",e)},Bt=function(e){var t={params:e};return Ke.get("/api/chat/oauth",t)},Ft=function(e){var t={params:e};return Ke.get("/api/chat/get_feedback",t)},Gt=function(e){return Ke.post("/api/chat/submit_feedback",e)},Et=function(e){return Ke.post("/api/chat/update_password",e)},St={name:"App",created:function(){window.screen.width>=768?this.screenRatio(100,1.3):this.screenRatio()},mounted:function(){this.getReqBySocket()},methods:{getReqBySocket:function(){var e=this;socketWeb.on("getresponse",function(t){console.log("获取新好友通知",t),e.$store.commit("newFriendMutation",t),e.$store.commit("friendReqTipsMutation",!0)})},dprRatio:function(){var e=navigator.userAgent,t=e.match(/Android[\S\s]+AppleWebkit\/(\d{3})/i),s=e.match(/U3\/((\d+|\.){5,})/i),n=s&&parseInt(s[i].split(",").join(""),10)>=80,a=navigator.appVersion.match(/(iphone|ipad|ipod)/gi),r=window.devicePixelRatio||1;return a||t&&t[1]>534||n||(r=1),r},screenRatio:function(e,t){var s=this.dprRatio();console.log(s,"dpr");var n=document.createElement("meta"),a=1/s;n.name="viewport",n.content="width=device-width,initial-scale="+a+", maximum-scale="+a+", minimum-scale="+a+", user-scalable=no";var r=document.getElementsByTagName("title")[0];r.parentNode.insertBefore(n,r);var i=e||100,o=t||1;document.documentElement.style.fontSize=i/2*s*o+"px"},logEvent:function(e){var t={type:e.type,user_id:e.user_id,time:e.time,params:e.params||{}};return $t(t).then(function(e){}).catch(function(e){console.log(e)})}},install:function(e,t){e.prototype.$app={logEvent:St.logEvent}}},Nt=St,Tt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},Ut=s("VU/8")(Nt,Tt,!1,null,null,null).exports,Lt=function(e,t){var s=e.commit;return Ye(t).then(function(e){if(e)if(1e5===e.data.code)s("robotMsgMutation",{message:e.data.text,user:"robot"});else if(2e5===e.data.code){var t=e.data.text+e.data.url;s("robotMsgMutation",{message:t,user:"robot"})}else e.data.code,s("robotMsgMutation",{message:e.data.text||"暂不支持此类对话",user:"robot"})}).catch(function(e){console.log(e)})},Ht=function(e,t){e.commit;return et(t).then(function(e){return e}).catch(function(e){console.log(e)})},Dt=function(e,t){e.commit;return tt(t).then(function(e){return e}).catch(function(e){console.log(e)})},Pt=function(e,t){var s=e.commit;return st(t).then(function(e){return e.success&&s("userInfoMutation",e.userInfo),e}).catch(function(e){console.log(e)})},Rt=function(e,t){e.commit;return at(t).then(function(e){return e}).catch(function(e){console.log(e)})},jt=function(e,t){e.commit;return rt(t).then(function(e){return e}).catch(function(e){console.log(e)})},Ot=function(e,t){var s=e.commit;return rt(t).then(function(e){s("someOneInfoMutation",e.data.userInfo[0])}).catch(function(e){console.log(e)})},At=function(e,t){var s=e.commit;return it(t).then(function(e){s("newFriendMutation",e.data.newFriends)}).catch(function(e){console.log(e)})},qt=function(e,t){e.commit;return ot(t).then(function(e){return e}).catch(function(e){console.log(e)})},Wt=function(e,t){e.commit;return ct(t).then(function(e){return e}).catch(function(e){return console.log(e),e})},Vt=function(e,t){e.commit;return ut(t).then(function(e){return e}).catch(function(e){console.log(e)})},Jt=function(e,t){var s=e.commit;return nt(t).then(function(e){if(e.success){var t=e.data.groupList,n=e.data.privateList;t.forEach(function(e){e.type="group",e.time=e.time?e.time:e.creater_time,e.id=e.group_id}),n.forEach(function(e){e.type="private",e.time=e.time?e.time:e.be_friend_time,e.id=e.other_user_id});var a=t.concat(n);a.sort(function(e,t){return t.time-e.time}),s("msgListMutation",a)}}).catch(function(e){console.log(e)})},zt=function(e,t){e.commit;return pt(t).then(function(e){return e}).catch(function(e){console.log(e)})},Zt=function(e,t){e.commit;return mt(t).then(function(e){return e}).catch(function(e){console.log(e)})},Kt=function(e,t){e.commit;return lt(t).then(function(e){return e}).catch(function(e){console.log(e)})},Xt=function(e,t){e.commit;return dt(t).then(function(e){return e}).catch(function(e){console.log(e)})},Qt=function(e,t){e.commit;return ft(t).then(function(e){return e}).catch(function(e){console.log(e)})},Yt=function(e,t){e.commit;return gt(t).then(function(e){return e}).catch(function(e){console.log(e)})},es=function(e,t){e.commit;return ht(t).then(function(e){return e}).catch(function(e){console.log(e)})},ts=function(e,t){e.commit;return vt(t).then(function(e){return e}).catch(function(e){console.log(e)})},ss=function(e,t){e.commit;return _t(t).then(function(e){return e}).catch(function(e){console.log(e)})},ns=function(e,t){e.commit;return bt(t).then(function(e){return e}).catch(function(e){console.log(e)})},as=function(e,t){e.commit;return wt(t).then(function(e){return e}).catch(function(e){console.log(e)})},rs=function(e,t){e.commit;return xt(t).then(function(e){return e}).catch(function(e){console.log(e)})},is=function(e,t){e.commit;return Ct(t).then(function(e){return e}).catch(function(e){console.log(e)})},os=function(e,t){var s=e.commit;return It(t).then(function(e){return e.success&&s("groupMemberMutation",e.data.groupMember),e}).catch(function(e){console.log(e)})},cs=function(e,t){e.commit;return yt(t).then(function(e){return e}).catch(function(e){console.log(e)})},us=function(e,t){e.commit;return kt(t).then(function(e){return e}).catch(function(e){console.log(e)})},ps=function(e,t){e.commit;return Mt(t).then(function(e){return e}).catch(function(e){console.log(e)})},ms=function(e,t){e.commit;return $t(t).then(function(e){return e}).catch(function(e){console.log(e)})},ls=function(e,t){e.commit;return Bt(t).then(function(e){return e}).catch(function(e){console.log(e)})},ds=function(e,t){var s=e.commit;return Ft(t).then(function(e){return e.success&&s("feedbackListMutation",e.data.feedbackList),e}).catch(function(e){console.log(e)})},fs=function(e,t){e.commit;return Gt(t).then(function(e){return e}).catch(function(e){console.log(e)})},gs=function(e,t){e.commit;return Et(t).then(function(e){return e}).catch(function(e){console.log(e)})},hs=function(e){return e.common.systemName},vs=function(e){return e.common.isMobile},_s=function(e){return e.common.feedbackListData},bs=function(e){return e.common.userInfoData},ws=function(e){return e.robot.robotmsg},xs=function(e){return e.common.newFriend},Cs=function(e){return e.message.msgList},Is=function(e){return e.message.firstLoad},ys=function(e){return e.message.someOneInfo},ks=function(e){return e.common.tabTips},Ms=function(e){return e.message.groupMember},$s=function(e){return e.message.groupInfo},Bs=s("bOdI"),Fs=s.n(Bs),Gs={systemName:"happyChat乐聊",userInfoData:JSON.parse(O()(localStorage.getItem("HappyChatUserInfo"))),newFriend:[],tabTips:{addFriendReq:""},isMobile:navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),feedbackListData:[]},Es=(Xe={},Fs()(Xe,"userInfoMutation",function(e,t){e.userInfoData=t}),Fs()(Xe,"newFriendMutation",function(e,t){e.newFriend=t}),Fs()(Xe,"friendReqTipsMutation",function(e,t){e.tabTips.addFriendReq=t?"tips":""}),Fs()(Xe,"feedbackListMutation",function(e,t){e.feedbackListData=t}),Xe),Ss={state:Gs,mutations:Es},Ns={state:{robotmsg:[{message:"hi , 欢迎与我聊天，问我问题哦！",user:"robot"}]},mutations:Fs()({},"robotMsgMutation",function(e,t){e.robotmsg.push(t)})},Ts={state:{firstLoad:!0,msgList:[],someOneInfo:{},groupMember:[],groupInfo:[]},mutations:(Qe={},Fs()(Qe,"firstLoadMutation",function(e,t){e.firstLoad=t}),Fs()(Qe,"msgListMutation",function(e,t){e.msgList=t}),Fs()(Qe,"updateListMutation",function(e,t){if("push"===t.action)return t.unread=1,void e.msgList.push(t);if("delete"!==t.action)if("private"===t.type){if(0===e.msgList.filter(function(e){return e.other_user_id==t.from_user}).length&&"request"===t.action)return t.unread=1,t.other_user_id=t.from_user,t.id=t.from_user,delete t.from_user,delete t.to_user,void e.msgList.push(t);e.msgList.forEach(function(e){if(e.other_user_id==t.from_user){if(e.message=t.name+" : "+t.message,e.time=t.time,e.name=t.name,e.reamrk=t.remark,e.avatar=t.avatar,t.chatOfNow)return;e.unread?e.unread+=1:e.unread=1}else e.other_user_id==t.to_user&&(e.message=t.name+" : "+t.message,e.time=t.time)})}else"group"===t.type&&e.msgList.forEach(function(e){e.group_id==t.groupId&&(e.message=t.name+" : "+t.message,e.time=t.time,e.group_name=t.group_name,e.group_avatar=t.group_avatar,e.id=t.groupId,t.chatOfNow?e.unread=null:e.unread?e.unread+=1:e.unread=1)});else for(var s=0;s<e.msgList.length;s++)e.msgList[s].id===t.id&&e.msgList.splice(s,1)}),Fs()(Qe,"resetUnredMutation",function(e,t){e.msgList.forEach(function(e){e.id==t&&(e.unread=null)})}),Fs()(Qe,"someOneInfoMutation",function(e,t){e.someOneInfo=t}),Fs()(Qe,"groupMemberMutation",function(e,t){e.groupMember=t}),Fs()(Qe,"groupInfoMutation",function(e,t){e.groupInfo=t}),Qe)};u.a.use(I.a);var Us=new I.a.Store({actions:a,getters:r,modules:{common:Ss,robot:Ns,message:Ts}}),Ls=(s("+g8z"),s("wvfG")),Hs=s.n(Ls),Ds={name:"MessageBox",props:{messageBoxEvent:{type:String,default:""},visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},canInput:{type:Boolean,default:!1},canEditorInfo:{type:Boolean,default:!1},hasCancel:{type:Boolean,default:!0},myInfoSpe:{type:Object,default:function(){return{}}},clear:{type:Boolean,default:!1}},components:{},mounted:function(){},data:function(){return{canInputText:"",password:{old:"",new:"",confirmNew:""}}},computed:{},watch:{clear:function(e){this.password={}}},methods:{cancel:function(){this.password={},this.$emit("cancel",this.messageBoxEvent)},confirm:function(){this.canInput?this.$emit("confirm",{messageBoxEvent:this.messageBoxEvent,canInputText:this.canInputText}):"editorInfo"!==this.messageBoxEvent?"editorPassword"!==this.messageBoxEvent?this.$emit("confirm",this.messageBoxEvent):this.$emit("confirm",{messageBoxEvent:this.messageBoxEvent,password:this.password}):this.$emit("confirm",{messageBoxEvent:this.messageBoxEvent,myInfo:JSON.parse(O()(this.myInfoSpe))})}}},Ps={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("div",{staticClass:"message-box"},[s("div",{staticClass:"bg"}),e._v(" "),s("div",{staticClass:"message-box-wrapper"},[s("h1",[e._v(" "+e._s(e.title))]),e._v(" "),e.canInput?s("input",{directives:[{name:"model",rawName:"v-model",value:e.canInputText,expression:"canInputText"}],attrs:{type:"text",maxlength:"10",placeholder:"最多10个字哦"},domProps:{value:e.canInputText},on:{input:function(t){t.target.composing||(e.canInputText=t.target.value)}}}):e._e(),e._v(" "),"editorInfo"===e.messageBoxEvent?s("form",{staticClass:"editor-info"},[s("div",{},[s("span",[e._v("github:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfoSpe.github,expression:"myInfoSpe.github"}],attrs:{type:"text",maxlength:"40"},domProps:{value:e.myInfoSpe.github},on:{input:function(t){t.target.composing||e.$set(e.myInfoSpe,"github",t.target.value)}}})]),e._v(" "),s("div",{},[s("span",[e._v("website:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfoSpe.website,expression:"myInfoSpe.website"}],attrs:{type:"text",maxlength:"40"},domProps:{value:e.myInfoSpe.website},on:{input:function(t){t.target.composing||e.$set(e.myInfoSpe,"website",t.target.value)}}})]),e._v(" "),s("div",{staticClass:"info-sex"},[s("span",[e._v("性别:")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.myInfoSpe.sex,expression:"myInfoSpe.sex"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.myInfoSpe,"sex",t.target.multiple?s:s[0])}}},[s("option",{staticClass:"option",attrs:{disabled:"",value:""}},[e._v("性别")]),e._v(" "),s("option",{staticClass:"option",attrs:{value:"1"}},[e._v("男")]),e._v(" "),s("option",{staticClass:"option",attrs:{value:"0"}},[e._v("女")])])]),e._v(" "),s("div",{},[s("span",[e._v("来自:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.myInfoSpe.place,expression:"myInfoSpe.place"}],attrs:{type:"text",maxlength:"20"},domProps:{value:e.myInfoSpe.place},on:{input:function(t){t.target.composing||e.$set(e.myInfoSpe,"place",t.target.value)}}})])]):e._e(),e._v(" "),"editorPassword"===e.messageBoxEvent?s("form",{staticClass:"editor-info"},[s("div",{},[s("span",[e._v("原密码:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password.old,expression:"password.old"}],attrs:{type:"text",maxlength:"24"},domProps:{value:e.password.old},on:{input:function(t){t.target.composing||e.$set(e.password,"old",t.target.value)}}})]),e._v(" "),s("div",{},[s("span",[e._v("新密码:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password.new,expression:"password.new"}],attrs:{type:"text",maxlength:"24"},domProps:{value:e.password.new},on:{input:function(t){t.target.composing||e.$set(e.password,"new",t.target.value)}}})]),e._v(" "),s("div",{},[s("span",[e._v("确认密码:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password.confirmNew,expression:"password.confirmNew"}],attrs:{type:"text",maxlength:"24"},domProps:{value:e.password.confirmNew},on:{input:function(t){t.target.composing||e.$set(e.password,"confirmNew",t.target.value)}}})])]):s("p",{staticClass:"content"},[e._t("content")],2),e._v(" "),e.hasCancel?s("div",{staticClass:"hasCancel"},[s("p",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),s("p",{on:{click:e.confirm}},[e._v("确定")])]):s("div",{staticClass:"noCancel"},[s("p",{on:{click:e.confirm}},[e._v("确定")])])])]):e._e()},staticRenderFns:[]};var Rs=s("VU/8")(Ds,Ps,!1,function(e){s("4ds/")},"data-v-43e2fdb2",null).exports,js={name:"Message",data:function(){return{message:"",type:"success",time:3500,isShow:!0}},mounted:function(){this.close()},methods:{close:function(){var e=this;window.setTimeout(function(){e.isShow=!1},this.time)}}},Os={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isShow?s("div",{staticClass:"tips"},["success"===e.type?s("div",{staticClass:"common-style success-tip"},[s("svg",{staticClass:"icon",staticStyle:{"font-size":"0.4rem"},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconsuccess"}})]),e._v(e._s(e.message)+"\n\t")]):e._e(),e._v(" "),"warn"===e.type?s("div",{staticClass:"common-style warn-tip"},[s("svg",{staticClass:"icon",staticStyle:{"font-size":"0.4rem"},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconwarn"}})]),e._v(" "+e._s(e.message)+"\n\t")]):e._e(),e._v(" "),"error"===e.type?s("div",{staticClass:"common-style error-tip"},[s("svg",{staticClass:"icon",staticStyle:{"font-size":"0.4rem"},attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#iconerror"}})]),e._v(" "+e._s(e.message)+"\n\t")]):e._e()]):e._e()},staticRenderFns:[]};var As=s("VU/8")(js,Os,!1,function(e){s("Xq8z")},"data-v-4c59a7bc",null).exports;As.installMessage=function(e){void 0===e||null===e?e={message:""}:"string"!=typeof e&&"number"!=typeof e||(e={message:e});var t=new(u.a.extend(As))({data:e}).$mount();document.querySelector("body").appendChild(t.$el)};var qs=As,Ws=function(e){e.component(qs.name,qs),e.component(Rs.name,Rs),e.prototype.$message=qs.installMessage},Vs=(s("yOCx"),{installed:!1,install:function(e){Vs.installed||(e.prototype.$loading={},e.prototype.$loading.show=function(){if(!document.querySelector("#modal")){var t=(new(e.extend({template:'<div id="modal">\n                    <div id="modal-mark"></div>\n                    <div id="vue-loading">\n                      <div class="loader"></div>\n                    </div>\n                  </div>'}))).$mount().$el;document.body.appendChild(t),document.querySelector("#modal").addEventListener("touchmove",function(e){e.stopPropagation(),e.preventDefault()}),Vs.installed=!0}},e.prototype.$loading.hide=function(){var e=document.querySelector("#modal");document.body.removeChild(e)})}}),Js=Vs,zs=void 0,Zs={bind:function(e,t,s){zs=function(e,t){t.scrollHeight<t.clientHeight||t.scrollTop+t.clientHeight===t.scrollHeight&&e()}.bind({},t.value,e),window.addEventListener("scroll",zs,!0)},unbind:function(e){window.removeEventListener("scroll",zs,!0)}};c()(n).forEach(function(e){return u.a.filter(e,n[e])}),u.a.directive("focus",{inserted:function(e){e.focus()}}),u.a.directive("scroll",Zs),u.a.use(Ws),u.a.use(Js),u.a.use(Hs.a),u.a.config.productionTip=!1,Ze.beforeEach(function(e,t,s){var n={type:"visit",user_id:null!==localStorage.getItem("HappyChatUserInfo")?JSON.parse(localStorage.getItem("HappyChatUserInfo")).user_id:"获取不到userId",time:(new Date).getTime(),params:{from:{name:t.name||"",path:t.path||"",query:t.query||""},to:{name:e.name||"",path:e.path||"",query:e.query||""}}};Ut.methods.logEvent(n),s()}),window.onunload=function(){var e={type:"close",user_id:null!==localStorage.getItem("HappyChatUserInfo")?JSON.parse(localStorage.getItem("HappyChatUserInfo")).user_id:"获取不到userId",time:(new Date).getTime(),params:{from:{name:"关闭前",path:Ze.currentRoute.path||"",query:Ze.currentRoute.params||""},to:{name:"关闭",path:"",query:""}}};Ut.methods.logEvent(e)},new u.a({el:"#app",router:Ze,store:Us,components:{App:Ut},template:"<App/>"})},RKiA:function(e,t){},SRR9:function(e,t){},Uolv:function(e,t){},V4Wu:function(e,t){},Xq8z:function(e,t){},Zo2f:function(e,t){},cfw9:function(e,t){},g9ug:function(e,t){},g9ve:function(e,t){},k7SN:function(e,t){},nDEl:function(e,t){},tLKz:function(e,t){},vHir:function(e,t){},yOCx:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.620c78f7ba5017b23438.js.map